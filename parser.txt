[90mOct  6 19:44:51.787195[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 949 bytes for traces/stripe/evt_1SFKL1CSZYH8WWmlgvyzEfgs[0m [36mrequest_id=[0me777564f
bufferedLog 0 false
[90mOct  6 19:44:52.370980[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0minvoice.paid [36mrequest_id=[0m4f056d57 [36mstripeID=[0mevt_1SFKL1CSZYH8WWml2X3ksnLl
bufferedLog 0 false
[90mOct  6 19:44:52.373953[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:44:52Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m5.592108 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m4f056d57 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:44:52.423846[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 5479 bytes for traces/stripe/evt_1SFKL1CSZYH8WWml2X3ksnLl[0m [36mrequest_id=[0m4f056d57
bufferedLog 0 false
[90mOct  6 19:44:52.587247[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.created [36mrequest_id=[0m6eb4817b [36mstripeID=[0mevt_1SFKL2CSZYH8WWml1wmzMvjK
bufferedLog 0 false
[90mOct  6 19:44:52.592318[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.939592 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:257"] [36mrequest_id=[0m6eb4817b [36mspan_id=[0m84df08e826493bf6 [36mtrace_id=[0ma8485dc16146d3930152d18334ac54b6
bufferedLog 0 false
2025/10/06 19:44:52 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[2.312ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hqssPKbAQDU7zliOr0jtTPuAO' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:44:52.594231[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:44:52Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m8.880415 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m6eb4817b [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:44:53.644298[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3816 bytes for traces/stripe/evt_1SFKL2CSZYH8WWml1wmzMvjK[0m [36mrequest_id=[0m6eb4817b
bufferedLog 0 false
[90mOct  6 19:45:51.530552[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.updated [36mrequest_id=[0mf030f95c [36mstripeID=[0mevt_1SFKLyCSZYH8WWmlBFupuDH8
bufferedLog 0 false
[90mOct  6 19:45:51.539511[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m5.487381 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:257"] [36mrequest_id=[0mf030f95c [36mspan_id=[0m490cd1a18f206a2c [36mtrace_id=[0m4296719223bc5158a61d43be17a75408
bufferedLog 0 false
2025/10/06 19:45:51 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[5.659ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33WNt3Ae4flwg4H2Q8ez82kvo0C' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:45:51.541441[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:45:51Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m52.15.183.38 [36mlatency=[0m38.008412 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mf030f95c [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:45:51.657250[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 5129 bytes for traces/stripe/evt_1SFKLyCSZYH8WWmlBFupuDH8[0m [36mrequest_id=[0mf030f95c
bufferedLog 0 false
[90mOct  6 19:47:34.728991[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcheckout.session.completed [36mrequest_id=[0m615d9a69 [36mstripeID=[0mevt_1SFKNeCSZYH8WWmlItoYfSec
bufferedLog 0 false
[90mOct  6 19:47:34.734381[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m2.384872 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:202"] [36mrequest_id=[0m615d9a69 [36mspan_id=[0m047014d59ded2cf1 [36mtrace_id=[0md2552a1494a4265c1f690439c42eb89e
bufferedLog 0 false
2025/10/06 19:47:34 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[3.495ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrDP8NK2BuB8KDaqlFpMYJxDD' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:47:34.737401[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:47:34Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m19.72074 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m615d9a69 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:47:34.812104[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.created [36mrequest_id=[0mf09d72d5 [36mstripeID=[0mevt_1SFKNeCSZYH8WWml3pN2EdJc
bufferedLog 0 false
[90mOct  6 19:47:34.817514[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m4.948778 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0mf09d72d5 [36mspan_id=[0m92882a28f15ba736 [36mtrace_id=[0mde8439cf96c8e5d9265a08576c43a388
bufferedLog 0 false
[90mOct  6 19:47:34.818078[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:47:34Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m6.412783 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mf09d72d5 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:47:34.890357[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 2957 bytes for traces/stripe/evt_1SFKNeCSZYH8WWmlItoYfSec[0m [36mrequest_id=[0m615d9a69
bufferedLog 0 false
[90mOct  6 19:47:34.921152[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 935 bytes for traces/stripe/evt_1SFKNeCSZYH8WWml3pN2EdJc[0m [36mrequest_id=[0mf09d72d5
bufferedLog 0 false
[90mOct  6 19:47:35.515308[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.updated [36mrequest_id=[0mae9fbebf [36mstripeID=[0mevt_1SFKNfCSZYH8WWmlt35vr2pv
bufferedLog 0 false
[90mOct  6 19:47:35.518811[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m2.97855 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0mae9fbebf [36mspan_id=[0mb6933b97aa4cc990 [36mtrace_id=[0m8d3715ec1fa44356b8c07ca9dfbd1ae2
bufferedLog 0 false
[90mOct  6 19:47:35.520044[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:47:35Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m5.9491 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mae9fbebf [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:47:35.561045[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 949 bytes for traces/stripe/evt_1SFKNfCSZYH8WWmlt35vr2pv[0m [36mrequest_id=[0mae9fbebf
bufferedLog 0 false
[90mOct  6 19:47:36.384024[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0minvoice.paid [36mrequest_id=[0m1233c992 [36mstripeID=[0mevt_1SFKNfCSZYH8WWmlAjPLuGDj
bufferedLog 0 false
[90mOct  6 19:47:36.386448[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:47:36Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m52.15.183.38 [36mlatency=[0m3.772965 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m1233c992 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:47:36.434469[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 5479 bytes for traces/stripe/evt_1SFKNfCSZYH8WWmlAjPLuGDj[0m [36mrequest_id=[0m1233c992
bufferedLog 0 false
[90mOct  6 19:47:36.724532[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.created [36mrequest_id=[0m434ce807 [36mstripeID=[0mevt_1SFKNgCSZYH8WWmlAi8XTQLp
bufferedLog 0 false
2025/10/06 19:47:36 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[1.264ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrDP8NK2BuB8KDaqlFpMYJxDD' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:47:36.727458[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.079317 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:257"] [36mrequest_id=[0m434ce807 [36mspan_id=[0m96e46f0054311e8f [36mtrace_id=[0m5f49a619f44bbc32af38b713ea68f68b
bufferedLog 0 false
[90mOct  6 19:47:36.728692[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:47:36Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m52.15.183.38 [36mlatency=[0m5.980764 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m434ce807 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:47:36.769790[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3816 bytes for traces/stripe/evt_1SFKNgCSZYH8WWmlAi8XTQLp[0m [36mrequest_id=[0m434ce807
bufferedLog 0 false
[90mOct  6 19:48:02.498321[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.deleted [36mrequest_id=[0m87e6ec32 [36mstripeID=[0mevt_1SFKO6CSZYH8WWmlQRjRFMpU
bufferedLog 0 false
[90mOct  6 19:48:02.508659[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m2.027017 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:314"] [36mrequest_id=[0m87e6ec32 [36mspan_id=[0m1472aa76f5f715ab [36mtrace_id=[0m921711d9962a7ceaa9c6b9a3decbd5fb
bufferedLog 0 false
2025/10/06 19:48:02 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[2.337ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hqssPKbAQDU7zliOr0jtTPuAO' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:48:02.512422[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:48:02Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m22.129528 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m87e6ec32 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:48:02.630398[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3892 bytes for traces/stripe/evt_1SFKO6CSZYH8WWmlQRjRFMpU[0m [36mrequest_id=[0m87e6ec32
bufferedLog 0 false
[90mOct  6 19:49:28.119817[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcheckout.session.completed [36mrequest_id=[0m269875df [36mstripeID=[0mevt_1SFKPTCSZYH8WWmlcq7LVQf0
bufferedLog 0 false
2025/10/06 19:49:28 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[9.072ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrRe1rQKk9kXdkUrReGTCUgGx' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:49:28.131633[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m8.867944 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:202"] [36mrequest_id=[0m269875df [36mspan_id=[0m5c9691b48a443c6f [36mtrace_id=[0m05d5c6b4058b9ba2dcc57943e7406848
bufferedLog 0 false
[90mOct  6 19:49:28.134147[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:49:28Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m35.865432 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m269875df [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:49:28.293021[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 2957 bytes for traces/stripe/evt_1SFKPTCSZYH8WWmlcq7LVQf0[0m [36mrequest_id=[0m269875df
bufferedLog 0 false
[90mOct  6 19:49:28.509356[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.created [36mrequest_id=[0m33c2a561 [36mstripeID=[0mevt_1SFKPUCSZYH8WWmloK0UdBuf
bufferedLog 0 false
[90mOct  6 19:49:28.513572[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m2.349941 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0m33c2a561 [36mspan_id=[0mcaa4277cf79e2bfb [36mtrace_id=[0m49b7656f79e63ae9b051a2dc2ae1402f
bufferedLog 0 false
[90mOct  6 19:49:28.514611[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:49:28Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m6.130971 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m33c2a561 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:49:28.551526[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 935 bytes for traces/stripe/evt_1SFKPUCSZYH8WWmloK0UdBuf[0m [36mrequest_id=[0m33c2a561
bufferedLog 0 false
[90mOct  6 19:49:29.644248[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.updated [36mrequest_id=[0mc0ed1901 [36mstripeID=[0mevt_1SFKPVCSZYH8WWml6cjxsAb6
bufferedLog 0 false
[90mOct  6 19:49:29.648134[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m3.291792 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0mc0ed1901 [36mspan_id=[0m96fa3b452c43b588 [36mtrace_id=[0me1431caf19ecdb1c9b065277efce712e
bufferedLog 0 false
[90mOct  6 19:49:29.650504[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:49:29Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m6.684374 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mc0ed1901 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:49:29.771738[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 949 bytes for traces/stripe/evt_1SFKPVCSZYH8WWml6cjxsAb6[0m [36mrequest_id=[0mc0ed1901
bufferedLog 0 false
[90mOct  6 19:49:30.593084[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0minvoice.paid [36mrequest_id=[0me2d4ceba [36mstripeID=[0mevt_1SFKPWCSZYH8WWmlB5NbgmO0
bufferedLog 0 false
[90mOct  6 19:49:30.597405[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:49:30Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m6.610626 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0me2d4ceba [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:49:30.656366[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 5479 bytes for traces/stripe/evt_1SFKPWCSZYH8WWmlB5NbgmO0[0m [36mrequest_id=[0me2d4ceba
bufferedLog 0 false
[90mOct  6 19:49:30.943073[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.created [36mrequest_id=[0mf47bf905 [36mstripeID=[0mevt_1SFKPWCSZYH8WWml68EuNAxd
bufferedLog 0 false
[90mOct  6 19:49:30.945822[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.177762 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:257"] [36mrequest_id=[0mf47bf905 [36mspan_id=[0m5529d3282a18a206 [36mtrace_id=[0mb03b377ab34b86c3f4d575b2c90fdb8a
bufferedLog 0 false
2025/10/06 19:49:30 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[1.495ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrRe1rQKk9kXdkUrReGTCUgGx' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:49:30.947783[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:49:30Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m52.15.183.38 [36mlatency=[0m5.518112 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mf47bf905 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:49:31.002070[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3816 bytes for traces/stripe/evt_1SFKPWCSZYH8WWml68EuNAxd[0m [36mrequest_id=[0mf47bf905
bufferedLog 0 false
[90mOct  6 19:50:16.968306[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.created [36mrequest_id=[0m2e2059e0 [36mstripeID=[0mevt_1SFKQGCSZYH8WWmlRjb74nv4
bufferedLog 0 false
[90mOct  6 19:50:16.970835[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m1.729373 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0m2e2059e0 [36mspan_id=[0m53cfb0f39d31b086 [36mtrace_id=[0m3c3c31c4f6f48430878c8d36a844fa4d
bufferedLog 0 false
[90mOct  6 19:50:16.973086[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:50:16Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m6.013016 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m2e2059e0 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:50:16.981209[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcheckout.session.completed [36mrequest_id=[0m376837cf [36mstripeID=[0mevt_1SFKQGCSZYH8WWmlI7t2ahrA
bufferedLog 0 false
[90mOct  6 19:50:16.983160[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.203844 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:202"] [36mrequest_id=[0m376837cf [36mspan_id=[0mf1c481463cc3adde [36mtrace_id=[0m5a562e5704cf5b4cd13ad415b34899a7
bufferedLog 0 false
2025/10/06 19:50:16 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[1.408ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrPbpQyMEXQFy9z7VcwJsnCHS' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:50:16.984321[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:50:16Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m52.15.183.38 [36mlatency=[0m4.004066 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m376837cf [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:50:17.115027[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 935 bytes for traces/stripe/evt_1SFKQGCSZYH8WWmlRjb74nv4[0m [36mrequest_id=[0m2e2059e0
bufferedLog 0 false
[90mOct  6 19:50:17.118764[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 2957 bytes for traces/stripe/evt_1SFKQGCSZYH8WWmlI7t2ahrA[0m [36mrequest_id=[0m376837cf
bufferedLog 0 false
[90mOct  6 19:50:18.364341[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.updated [36mrequest_id=[0m46b0c8df [36mstripeID=[0mevt_1SFKQHCSZYH8WWmllIYg3cir
bufferedLog 0 false
[90mOct  6 19:50:18.365363[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m0.747148 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0m46b0c8df [36mspan_id=[0mb68f30dec07bb63d [36mtrace_id=[0m3656bbf3ab5fca26dfb7999009aa4967
bufferedLog 0 false
[90mOct  6 19:50:18.366228[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:50:18Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m2.356649 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m46b0c8df [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:50:18.409776[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 949 bytes for traces/stripe/evt_1SFKQHCSZYH8WWmllIYg3cir[0m [36mrequest_id=[0m46b0c8df
bufferedLog 0 false
[90mOct  6 19:50:19.316353[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0minvoice.paid [36mrequest_id=[0m354d2b0b [36mstripeID=[0mevt_1SFKQICSZYH8WWml38RPs6Cy
bufferedLog 0 false
[90mOct  6 19:50:19.319722[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:50:19Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m52.15.183.38 [36mlatency=[0m4.923667 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m354d2b0b [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:50:19.360297[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 5479 bytes for traces/stripe/evt_1SFKQICSZYH8WWml38RPs6Cy[0m [36mrequest_id=[0m354d2b0b
bufferedLog 0 false
[90mOct  6 19:50:19.923884[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.created [36mrequest_id=[0m3925eac2 [36mstripeID=[0mevt_1SFKQJCSZYH8WWmloDd0nylK
bufferedLog 0 false
[90mOct  6 19:50:19.927722[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.925785 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:257"] [36mrequest_id=[0m3925eac2 [36mspan_id=[0m850d3fe5dfc4fd9b [36mtrace_id=[0macd5898bf6ab6e9a83ed43d3be4aa2ae
bufferedLog 0 false
2025/10/06 19:50:19 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[2.203ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrPbpQyMEXQFy9z7VcwJsnCHS' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:50:19.929571[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:50:19Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m7.227151 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m3925eac2 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:50:19.967878[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3816 bytes for traces/stripe/evt_1SFKQJCSZYH8WWmloDd0nylK[0m [36mrequest_id=[0m3925eac2
bufferedLog 0 false
[90mOct  6 19:20:53.968721[0m [32mINF[0m [1mpkg/observability/logging.go:51[0m[36m >[0m [1mLogger configured[0m
bufferedLog 0 false
[90mOct  6 19:20:53.982139[0m [32mINF[0m [1mpkg/observability/logging.go:51[0m[36m >[0m [1mLogger configured[0m
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997390 INFO: Starting processing
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997532 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997556 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997467 INFO: Starting processing
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997987 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997991 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997482 INFO: Starting processing
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.998241 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.998421 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.997479 INFO: Starting processing
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.998438 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14073 2025/10/06 19:20:53.998446 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
[90mOct  6 19:21:09.038744[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mff103f8ce49c70ec27dd4baff41e4b51-820927678da3c672-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
pkg/handlers/webhook.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
running...
bufferedLog 0 false
[90mOct  6 19:21:24.071941[0m [32mINF[0m [1mpkg/observability/logging.go:51[0m[36m >[0m [1mLogger configured[0m
bufferedLog 0 false
[90mOct  6 19:21:24.113982[0m [32mINF[0m [1mpkg/observability/logging.go:51[0m[36m >[0m [1mLogger configured[0m
bufferedLog 0 false
[90mOct  6 19:21:24.131531[0m [32mINF[0m [1mpkg/observability/logging.go:51[0m[36m >[0m [1mLogger configured[0m
bufferedLog 0 false
[90mOct  6 19:21:24.148154[0m [32mINF[0m [1mpkg/observability/logging.go:51[0m[36m >[0m [1mLogger configured[0m
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160468 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160473 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160497 INFO: Starting processing
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160503 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160504 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160506 INFO: Starting processing
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160514 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160514 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160517 INFO: Starting processing
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160532 INFO: Send signal TSTP to stop processing new tasks
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160536 INFO: Send signal TERM or INT to terminate the process
bufferedLog 0 false
asynq: pid=14147 2025/10/06 19:21:24.160415 INFO: Starting processing
bufferedLog 0 false
[90mOct  6 19:21:39.205433[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m95af5ac2fb83c628ed3a676405c2eac0-8beb3cf9d941a7cd-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:22:09.269408[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m427ffdf84fd5201c3fb3dfd1428bd013-8541cf47b2279c3d-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:22:39.340254[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mba6b5aa9ef754f35d7dcb304b3620f41-ba67c4ae281f3a97-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:22:44.368753[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m00b65af9-4e8e-4d0f-a42c-e140efdc8858 [36mtask=[0mIndexMessages [36mtrace_id=[0mc4553f910075c98997939c97009c86f9-62fe8730c2168a13-1 [36mwrapped_trace_id=[0mc4553f910075c98997939c97009c86f9-51c7d1386a233e14-1
bufferedLog 0 false
[90mOct  6 19:23:09.405547[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0md74fd4f138ffc6b8d441f71532f11d00-7cc61564ed68b9aa-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:23:39.474130[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m858269c4f4cd5452d5ecb46e36127151-f8153b7a0b11253e-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:24:05.569663[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0mfd17723e-3b09-40cf-8f56-7361e4a1ce66 [36mtask=[0mSyncBadge [36mtrace_id=[0m20eeadedb1b77ed3c9a88dc0a78a8ebf-4d5e927e58cd115a-1 [36mwrapped_trace_id=[0m20eeadedb1b77ed3c9a88dc0a78a8ebf-bdfe4275b33a6ab9-1
bufferedLog 0 false
[90mOct  6 19:24:05.618129[0m [32mINF[0m [1mpkg/notifications/notificationservice.go:164[0m[36m >[0m [1msent notifications[0m [36mtraceID=[0m20eeadedb1b77ed3c9a88dc0a78a8ebf [36mtype=[0m*notification.syncBadgeNotification [36muserIDs=[0m[31YmaYRfy5BcxS1alwOAkDSmbtD]
bufferedLog 0 false
[90mOct  6 19:24:09.544122[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0ma8a8d979f232e9d06994f8eb00684aeb-f3865e7c80f3d524-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:24:39.619615[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m23e82adf9f3f40992bcc955487172ba9-c356e8b37fd77e75-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:25:09.718282[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m788b3a490e23900053cae6035332f519-b0b871586ce3c9a8-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:25:39.803722[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mc79a11bb238cde63cdc0a485071fee4e-4e8b5ad85584af8c-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:26:09.889366[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mee3856d1e4f98784c919dabc74e75903-6898d9c3fc78d976-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:26:39.990153[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m95d27c82bccf20400c551379341c9a0f-debe0fa41b524cde-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:27:09.061474[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m1510b8dad296d6fc5ec0984b3958ac45-a06ba643c92cad68-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:27:39.126159[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m937fb737ad23619ca19c0a07b5db2cc1-13bcd90ff4efd5d5-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:28:09.199158[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m76d906ba54390dbbc816ff6a3ad1a9c3-8c6b99bf6f8ead89-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:28:39.261779[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m71f3a45369502e6c525efc6c4979ae98-8fe1a2f3caefa4d4-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:29:09.347889[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m582ed2c8dff76aeaa405a24909c7df16-71de3f22b8878e54-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:29:39.444472[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m6bacc172d789ebfc23ea8ef576f4a30e-66f338fa2bf13ba8-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:30:09.517597[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m62d88f3769db835f11828b44c6663c2a-d20ed7ad5e20025b-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:30:39.575248[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m985c5906c59ce09197eadfed2c0dfbaa-c3469988ad4467b6-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:31:09.642755[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m3b45c3ff39b511f73588b137d2d0cdb6-1d5f2be6a899c879-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:31:39.701075[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m5116816baa12d263b8c6a3c3db548c14-73005a3065f6f9b0-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:32:09.756045[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mc488dd4a7fc9cefdbf0acd1a36f028e5-27f97252e7ca1cee-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:32:39.816202[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m39a7cc48bff403585b6f6c51332cc1c6-be18b5815de1082b-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:33:09.893412[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mc021f28dd50648d471d9ac5ef25195bc-bbbdc04fc7494b99-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:33:39.952219[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mffea65397e0d155e43674b063d91cfed-61c0f14f78e8dc75-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:34:10.020901[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m2ed0257372b3ecc291287a954b8f6d89-1ccc1f2af979fd98-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:34:39.083363[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m5bd827731f35c1f8579b318a52d9e823-62f53395d2b4823e-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:35:09.150655[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mdb6af18d44b2fd3abe2341049cdc0501-f64304916ad4c707-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:35:39.231700[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m06191f6f225007444314f2a206183417-b77d256cf8ec89f0-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:36:09.333111[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m722805ad8e960ae77106726ad0cfe3d3-aa3dd23a6cb85ccc-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:36:39.410447[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m9a4f61e0f9cec08655644d291e795683-a88b18bf65868101-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:37:09.503452[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mb70fa8f404e863c7fc721a9affbc4873-780e29799988d8ee-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:37:39.618632[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mbb5de542711ce76af9628a3ab0546cd3-e09dd410f2e46000-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:38:09.742984[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m75ee0548b584887067918975e58ee9e9-5103481f4110a64b-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:38:39.842392[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m8d5921bae3636e5a721c2deac48a7e9e-02df55f4ac74afcd-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:38:39.857444[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mRefreshSlackToken [36mtrace_id=[0m6a5f4e8ca6de73c2a3cc360a51f26dce-6af497a8810853fe-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:38:39.860040[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mglueai:cleanup [36mtrace_id=[0m11a1ed994f3bd44607d73d0408ba1d36-3cf7e327ce703e93-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:38:39.860161[0m [32mINF[0m [1mpkg/operations/glueai/cleanup_task.go:52[0m[36m >[0m [1mRunning GlueAI response flow cleanup task[0m
bufferedLog 0 false
[90mOct  6 19:38:39.894328[0m [32mINF[0m [1mpkg/operations/glueai/cleanup_task.go:66[0m[36m >[0m [1mSuccessfully cleaned up old GlueAI response flows[0m [36mdeleted_count=[0m0
bufferedLog 0 false
[90mOct  6 19:39:09.971604[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mcadae8fdb0a3c7fa8170a7bfbc321ddd-bbb4e62fab9bb531-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:39:39.087499[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m38f63d458f1e70aaa879a71de1cf9118-7d3660b03db70e5d-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:40:09.190603[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mfcd6e7c43cce1b0677e95b18b7212406-d74a6600a8e8e770-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:40:39.317460[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0me5b4fd9b51b59a2ab6fbec21d3115cac-3987cc3dd2254c32-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:41:09.432491[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m2a2148ba1132c12198e503c85f8d7b13-b1f98be28b0be081-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:41:39.563951[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m7d7d99d3a4dbfe9000d4990b1c657b68-881ea51a104531bb-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:42:09.706451[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mbeaa727e0b24e611c5825897263aab4d-c27c23a40907c69e-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:42:39.816106[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m776e7bb3e45bce83dbaa7ee5727b0d02-3c7f29e98b958c72-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:43:09.932315[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mab635f8aa3b9cfc9ac237d18c6d17a0f-2c05a281d49621e2-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:43:39.058463[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0ma575fdab67a773799f1c45894f75ed2a-dcce1985cf37f24b-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:44:09.183267[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m2a465a0b2ec853b2bbc93b507e7abe91-9e2f6b8a3ecf73be-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:44:39.325618[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m5db09b7d5117c5f50f132751b8c37bfb-ab60911e444a02db-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:45:09.451458[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mf788dcbcf3ffdd5987dad6abd1ed5b95-0b0cfdf264392943-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:45:39.587969[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mfa57d7556930dd28ac228b7406f04606-9259690be88cd72b-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:46:09.724010[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m437f80bf2ae4bcf76a9ceb196d5882f3-1a66e4b9f4996b84-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:46:39.794910[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m5edf1e303a8ddcb1a7b50dba9dcbf88d-68b7feba1fb57abd-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:47:09.872569[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m198cd0a830998ace41ee5f2f4f75763d-4441cebba17eab16-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:47:39.949904[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mb4fb01f0045c9193d699794255ec6240-c091676750a59388-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:48:09.021501[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mb8d2dff4deab5c1f8e591dc8c3641f44-924ea3648ed026e0-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:48:39.092243[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m3f92f5fbe69fd1dad45798bf3599cffe-1857eea692bc8d77-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:49:09.178347[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m4d127bfbc2f5beaf2167d7417a636b0b-c2ae2527a02cc36a-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:49:39.247994[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0md2135cfcb0dc76087cbb3a44970ea6f7-afb70e081d4f7ff9-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:50:09.317868[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m4e7737de2feb69f8739458b145c17094-1f010beadeb02b41-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:50:39.378288[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mc824db3ade235206b6db93204a50725e-c7f5ebae69ae754a-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
asynq: pid=3707 2025/10/06 17:31:09.092341 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=3707 2025/10/06 17:31:09.092347 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/handlers/webhook.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=3758 2025/10/06 17:32:05.195580 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=3758 2025/10/06 17:32:05.195856 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=3758 2025/10/06 17:32:05.195871 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/handlers/webhook.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=3810 2025/10/06 17:33:06.194311 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=3810 2025/10/06 17:33:06.194329 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=3810 2025/10/06 17:33:06.194336 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/handlers/webhook.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=3858 2025/10/06 17:33:23.483806 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=3858 2025/10/06 17:33:23.483765 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=3858 2025/10/06 17:33:23.483938 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/handlers/webhook.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=3910 2025/10/06 17:34:40.282506 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=3910 2025/10/06 17:34:40.282518 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=3910 2025/10/06 17:34:40.282529 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/operations/thread/thread.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
# github.com/gluegroups/glue-api/pkg/operations/thread
bufferedLog 0 false
pkg/operations/thread/thread.go:427:31: repos.Thread(ctx).FindByRecipients undefined (type "github.com/gluegroups/glue-api/pkg/repository/thread".Repository has no field or method FindByRecipients)
bufferedLog 0 false
failed to build, error: exit status 1
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=3968 2025/10/06 17:35:09.074065 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=3968 2025/10/06 17:35:09.074077 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=3968 2025/10/06 17:35:09.074087 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/operations/thread/thread.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
package command-line-arguments
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/tasks/worker from main.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/graphql/resolvers/users from worker.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/graphql/objects from mutations.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/operations/thread from draft.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/operations/thread from thread.go: import cycle not allowed
bufferedLog 0 false
failed to build, error: exit status 1
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=3997 2025/10/06 17:37:20.826182 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=3997 2025/10/06 17:37:20.826202 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=3997 2025/10/06 17:37:20.826215 INFO: Send signal TERM or INT to stop the schedulerpkg/operations/thread/thread.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
package command-line-arguments
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/tasks/worker from main.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/graphql/resolvers/users from worker.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/graphql/objects from mutations.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/operations/thread from draft.go
bufferedLog 0 false
	imports github.com/gluegroups/glue-api/pkg/operations/thread from thread.go: import cycle not allowed
bufferedLog 0 false
failed to build, error: exit status 1
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=4023 2025/10/06 17:37:25.011056 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=4023 2025/10/06 17:37:25.011152 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=4023 2025/10/06 17:37:25.011538 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/operations/thread/thread.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
# github.com/gluegroups/glue-api/pkg/operations/thread
bufferedLog 0 false
pkg/operations/thread/thread.go:427:3: undefined: t
bufferedLog 0 false
pkg/operations/thread/thread.go:427:6: undefined: err
bufferedLog 0 false
pkg/operations/thread/thread.go:427:42: cannot use model.UserFromCtx(ctx) (value of type *model.User) as string value in argument to findOrInitPersistentChat
bufferedLog 0 false
pkg/operations/thread/thread.go:428:6: undefined: err
bufferedLog 0 false
pkg/operations/thread/thread.go:429:29: undefined: err
bufferedLog 0 false
pkg/operations/thread/thread.go:431:10: undefined: t
bufferedLog 0 false
failed to build, error: exit status 1
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=4079 2025/10/06 17:37:51.685372 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=4079 2025/10/06 17:37:51.685401 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=4079 2025/10/06 17:37:51.685412 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/operations/thread/thread.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
# github.com/gluegroups/glue-api/pkg/operations/thread
bufferedLog 0 false
pkg/operations/thread/thread.go:427:3: undefined: t
bufferedLog 0 false
pkg/operations/thread/thread.go:427:6: undefined: err
bufferedLog 0 false
pkg/operations/thread/thread.go:428:6: undefined: err
bufferedLog 0 false
pkg/operations/thread/thread.go:429:29: undefined: err
bufferedLog 0 false
pkg/operations/thread/thread.go:431:10: undefined: t
bufferedLog 0 false
failed to build, error: exit status 1
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=4139 2025/10/06 17:38:13.211037 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=4139 2025/10/06 17:38:13.211057 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=4139 2025/10/06 17:38:13.211089 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/operations/thread/thread.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=4355 2025/10/06 17:38:23.312083 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=4355 2025/10/06 17:38:23.312094 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=4355 2025/10/06 17:38:23.312102 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
pkg/operations/thread/thread.go has changed
bufferedLog 0 false
building...
bufferedLog 0 false
running...
bufferedLog 0 false
asynq: pid=4529 2025/10/06 17:38:39.251181 INFO: Scheduler starting
bufferedLog 0 false
asynq: pid=4529 2025/10/06 17:38:39.251242 INFO: Scheduler timezone is set to UTC
bufferedLog 0 false
asynq: pid=4529 2025/10/06 17:38:39.251259 INFO: Send signal TERM or INT to stop the scheduler
bufferedLog 0 false
PostgreSQL Database directory appears to contain a database; Skipping initialization
bufferedLog 0 false
2025-10-03 21:25:34.141 UTC [1] LOG:  starting PostgreSQL 17.6 (Debian 17.6-1.pgdg12+1) on aarch64-unknown-linux-gnu, compiled by gcc (Debian 12.2.0-14+deb12u1) 12.2.0, 64-bit
bufferedLog 0 false
2025-10-03 21:25:34.141 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
bufferedLog 0 false
2025-10-03 21:25:34.142 UTC [1] LOG:  listening on IPv6 address "::", port 5432
bufferedLog 0 false
2025-10-03 21:25:34.144 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
bufferedLog 0 false
2025-10-03 21:25:34.148 UTC [30] LOG:  database system was shut down at 2025-10-03 21:25:29 UTC
bufferedLog 0 false
2025-10-03 21:25:34.155 UTC [1] LOG:  database system is ready to accept connections
bufferedLog 0 false
2025-10-03 21:30:34.167 UTC [28] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-03 21:30:34.195 UTC [28] LOG:  checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.002 s, sync=0.004 s, total=0.029 s; sync files=3, longest=0.004 s, average=0.002 s; distance=0 kB, estimate=0 kB; lsn=0/688CC30, redo lsn=0/688CBD8
bufferedLog 0 false
2025-10-06 16:39:18.319 UTC [1] LOG:  received fast shutdown request
bufferedLog 0 false
2025-10-06 16:39:18.548 UTC [1] LOG:  aborting any active transactions
bufferedLog 0 false
2025-10-06 16:39:18.560 UTC [1] LOG:  background worker "logical replication launcher" (PID 33) exited with exit code 1
bufferedLog 0 false
2025-10-06 16:39:18.567 UTC [28] LOG:  shutting down
bufferedLog 0 false
2025-10-06 16:39:18.574 UTC [28] LOG:  checkpoint starting: shutdown immediate
bufferedLog 0 false
2025-10-06 16:39:18.652 UTC [28] LOG:  checkpoint complete: wrote 0 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.016 s, sync=0.001 s, total=0.086 s; sync files=0, longest=0.000 s, average=0.000 s; distance=0 kB, estimate=0 kB; lsn=0/688CCE0, redo lsn=0/688CCE0
bufferedLog 0 false
2025-10-06 16:39:18.668 UTC [1] LOG:  database system is shut down
bufferedLog 0 false
PostgreSQL Database directory appears to contain a database; Skipping initialization
bufferedLog 0 false
2025-10-06 16:43:09.732 UTC [1] LOG:  starting PostgreSQL 17.6 (Debian 17.6-1.pgdg12+1) on aarch64-unknown-linux-gnu, compiled by gcc (Debian 12.2.0-14+deb12u1) 12.2.0, 64-bit
bufferedLog 0 false
2025-10-06 16:43:09.733 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
bufferedLog 0 false
2025-10-06 16:43:09.733 UTC [1] LOG:  listening on IPv6 address "::", port 5432
bufferedLog 0 false
2025-10-06 16:43:09.735 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
bufferedLog 0 false
2025-10-06 16:43:09.739 UTC [30] LOG:  database system was shut down at 2025-10-06 16:39:18 UTC
bufferedLog 0 false
2025-10-06 16:43:09.749 UTC [1] LOG:  database system is ready to accept connections
bufferedLog 0 false
2025-10-06 16:48:09.841 UTC [28] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 16:48:09.879 UTC [28] LOG:  checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.002 s, sync=0.003 s, total=0.039 s; sync files=3, longest=0.003 s, average=0.001 s; distance=0 kB, estimate=0 kB; lsn=0/688CDE8, redo lsn=0/688CD90
bufferedLog 0 false
PostgreSQL Database directory appears to contain a database; Skipping initialization
bufferedLog 0 false
2025-10-03 21:25:34.141 UTC [1] LOG:  starting PostgreSQL 17.6 (Debian 17.6-1.pgdg12+1) on aarch64-unknown-linux-gnu, compiled by gcc (Debian 12.2.0-14+deb12u1) 12.2.0, 64-bit
bufferedLog 0 false
2025-10-03 21:25:34.141 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
bufferedLog 0 false
2025-10-03 21:25:34.141 UTC [1] LOG:  listening on IPv6 address "::", port 5432
bufferedLog 0 false
2025-10-03 21:25:34.144 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
bufferedLog 0 false
2025-10-03 21:25:34.148 UTC [28] LOG:  database system was shut down at 2025-10-03 21:25:29 UTC
bufferedLog 0 false
2025-10-03 21:25:34.156 UTC [1] LOG:  database system is ready to accept connections
bufferedLog 0 false
2025-10-03 21:30:34.254 UTC [26] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-03 21:30:36.648 UTC [26] LOG:  checkpoint complete: wrote 25 buffers (0.2%); 0 WAL file(s) added, 0 removed, 0 recycled; write=2.364 s, sync=0.018 s, total=2.395 s; sync files=12, longest=0.007 s, average=0.002 s; distance=82 kB, estimate=82 kB; lsn=0/98AD988, redo lsn=0/98AD930
bufferedLog 0 false
2025-10-03 21:55:34.945 UTC [26] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-03 21:55:37.548 UTC [26] LOG:  checkpoint complete: wrote 26 buffers (0.2%); 0 WAL file(s) added, 0 removed, 0 recycled; write=2.524 s, sync=0.048 s, total=2.603 s; sync files=19, longest=0.009 s, average=0.003 s; distance=146 kB, estimate=146 kB; lsn=0/98D2470, redo lsn=0/98D2418
bufferedLog 0 false
2025-10-03 22:25:34.882 UTC [26] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-03 22:25:38.703 UTC [26] LOG:  checkpoint complete: wrote 40 buffers (0.2%); 0 WAL file(s) added, 0 removed, 0 recycled; write=3.748 s, sync=0.050 s, total=3.822 s; sync files=32, longest=0.011 s, average=0.002 s; distance=79 kB, estimate=139 kB; lsn=0/98E6160, redo lsn=0/98E6108
bufferedLog 0 false
2025-10-03 22:30:34.804 UTC [26] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-03 22:30:35.994 UTC [26] LOG:  checkpoint complete: wrote 13 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.142 s, sync=0.020 s, total=1.191 s; sync files=12, longest=0.007 s, average=0.002 s; distance=28 kB, estimate=128 kB; lsn=0/98ED1B0, redo lsn=0/98ED158
bufferedLog 0 false
2025-10-03 22:40:35.195 UTC [26] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-03 22:40:35.534 UTC [26] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.311 s, sync=0.012 s, total=0.340 s; sync files=4, longest=0.005 s, average=0.003 s; distance=15 kB, estimate=117 kB; lsn=0/98F1108, redo lsn=0/98F10B0
bufferedLog 0 false
2025-10-06 16:14:53.891 UTC [26] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 16:15:04.234 UTC [26] LOG:  checkpoint complete: wrote 100 buffers (0.6%); 0 WAL file(s) added, 0 removed, 0 recycled; write=10.296 s, sync=0.021 s, total=10.344 s; sync files=14, longest=0.010 s, average=0.002 s; distance=505 kB, estimate=505 kB; lsn=0/996F8F0, redo lsn=0/996F860
bufferedLog 0 false
2025-10-06 16:39:18.316 UTC [1] LOG:  received fast shutdown request
bufferedLog 0 false
2025-10-06 16:39:18.548 UTC [1] LOG:  aborting any active transactions
bufferedLog 0 false
2025-10-06 16:39:18.556 UTC [1] LOG:  background worker "logical replication launcher" (PID 31) exited with exit code 1
bufferedLog 0 false
2025-10-06 16:39:18.559 UTC [26] LOG:  shutting down
bufferedLog 0 false
2025-10-06 16:39:18.574 UTC [26] LOG:  checkpoint starting: shutdown immediate
bufferedLog 0 false
2025-10-06 16:39:18.641 UTC [26] LOG:  checkpoint complete: wrote 0 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.001 s, sync=0.001 s, total=0.083 s; sync files=0, longest=0.000 s, average=0.000 s; distance=0 kB, estimate=455 kB; lsn=0/996F9A0, redo lsn=0/996F9A0
bufferedLog 0 false
2025-10-06 16:39:18.652 UTC [1] LOG:  database system is shut down
bufferedLog 0 false
PostgreSQL Database directory appears to contain a database; Skipping initialization
bufferedLog 0 false
2025-10-06 16:43:09.738 UTC [1] LOG:  starting PostgreSQL 17.6 (Debian 17.6-1.pgdg12+1) on aarch64-unknown-linux-gnu, compiled by gcc (Debian 12.2.0-14+deb12u1) 12.2.0, 64-bit
bufferedLog 0 false
2025-10-06 16:43:09.739 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
bufferedLog 0 false
2025-10-06 16:43:09.739 UTC [1] LOG:  listening on IPv6 address "::", port 5432
bufferedLog 0 false
2025-10-06 16:43:09.741 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
bufferedLog 0 false
2025-10-06 16:43:09.746 UTC [29] LOG:  database system was shut down at 2025-10-06 16:39:18 UTC
bufferedLog 0 false
2025-10-06 16:43:09.753 UTC [1] LOG:  database system is ready to accept connections
bufferedLog 0 false
2025-10-06 16:48:09.841 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 16:48:13.946 UTC [27] LOG:  checkpoint complete: wrote 41 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.045 s, sync=0.023 s, total=4.105 s; sync files=12, longest=0.009 s, average=0.002 s; distance=221 kB, estimate=221 kB; lsn=0/99A6E48, redo lsn=0/99A6DF0
bufferedLog 0 false
2025-10-06 16:53:10.045 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 16:53:11.955 UTC [27] LOG:  checkpoint complete: wrote 20 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.874 s, sync=0.013 s, total=1.911 s; sync files=6, longest=0.004 s, average=0.003 s; distance=41 kB, estimate=203 kB; lsn=0/99B1618, redo lsn=0/99B15C0
bufferedLog 0 false
2025-10-06 17:03:11.054 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 17:03:11.403 UTC [27] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.313 s, sync=0.011 s, total=0.350 s; sync files=4, longest=0.005 s, average=0.003 s; distance=17 kB, estimate=184 kB; lsn=0/99B5CC0, redo lsn=0/99B5C68
bufferedLog 0 false
2025-10-06 17:58:12.253 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 17:58:19.128 UTC [27] LOG:  checkpoint complete: wrote 69 buffers (0.4%); 0 WAL file(s) added, 0 removed, 0 recycled; write=6.770 s, sync=0.082 s, total=6.877 s; sync files=49, longest=0.016 s, average=0.002 s; distance=278 kB, estimate=278 kB; lsn=0/99FB8C8, redo lsn=0/99FB838
bufferedLog 0 false
2025-10-06 18:03:12.214 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 18:03:13.302 UTC [27] LOG:  checkpoint complete: wrote 12 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.044 s, sync=0.020 s, total=1.089 s; sync files=7, longest=0.008 s, average=0.003 s; distance=57 kB, estimate=256 kB; lsn=0/9A0A030, redo lsn=0/9A09FC0
bufferedLog 0 false
1:M 06 Oct 2025 18:13:27.043 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 18:13:27.071 * Background saving started by pid 38
2025-10-06 18:08:12.404 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
bufferedLog 0 false
38:C 06 Oct 2025 18:13:27.095 * DB saved on disk
bufferedLog 0 false
2025-10-06 18:08:18.830 UTC [27] LOG:  checkpoint complete: wrote 65 buffers (0.4%); 0 WAL file(s) added, 0 removed, 0 recycled; write=6.347 s, sync=0.055 s, total=6.428 s; sync files=37, longest=0.015 s, average=0.002 s; distance=311 kB, estimate=311 kB; lsn=0/9A57EB0, redo lsn=0/9A57E58
bufferedLog 0 false
38:C 06 Oct 2025 18:13:27.095 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 18:13:27.177 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 18:18:28.008 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
2025-10-06 18:13:12.868 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 18:13:17.955 UTC [27] LOG:  checkpoint complete: wrote 50 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=5.016 s, sync=0.048 s, total=5.087 s; sync files=21, longest=0.014 s, average=0.003 s; distance=240 kB, estimate=304 kB; lsn=0/9A94040, redo lsn=0/9A93F98
bufferedLog 0 false
1:M 06 Oct 2025 18:18:28.024 * Background saving started by pid 39
bufferedLog 0 false
39:C 06 Oct 2025 18:18:28.081 * DB saved on disk
bufferedLog 0 false
2025-10-06 18:28:13.149 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 18:28:14.459 UTC [27] LOG:  checkpoint complete: wrote 14 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.262 s, sync=0.022 s, total=1.311 s; sync files=9, longest=0.008 s, average=0.003 s; distance=37 kB, estimate=277 kB; lsn=0/9A9D7A0, redo lsn=0/9A9D748
bufferedLog 0 false
39:C 06 Oct 2025 18:18:28.081 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 18:18:28.128 * Background saving terminated with success
bufferedLog 0 false
2025-10-06 18:33:13.467 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
1:M 06 Oct 2025 18:23:29.051 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
2025-10-06 18:33:13.950 UTC [27] LOG:  checkpoint complete: wrote 6 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.420 s, sync=0.016 s, total=0.484 s; sync files=5, longest=0.006 s, average=0.004 s; distance=15 kB, estimate=251 kB; lsn=0/9AA16C0, redo lsn=0/9AA1668
bufferedLog 0 false
1:M 06 Oct 2025 18:23:29.067 * Background saving started by pid 40
bufferedLog 0 false
40:C 06 Oct 2025 18:23:29.111 * DB saved on disk
bufferedLog 0 false
40:C 06 Oct 2025 18:23:29.112 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
2025-10-06 18:37:46.345 UTC [7878] ERROR:  there is no parameter $1 at character 377
bufferedLog 0 false
1:M 06 Oct 2025 18:23:29.171 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 18:28:30.069 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
2025-10-06 18:37:46.345 UTC [7878] STATEMENT:  SELECT "workspace_apps"."id","workspace_apps"."created_at","workspace_apps"."updated_at","workspace_apps"."deleted_at","workspace_apps"."user_id","workspace_apps"."workspace_id","workspace_apps"."app_id","workspace_apps"."app_user_id" FROM "workspace_apps" JOIN workspace_app_webhooks wbh ON wbh.deleted_at IS NULL AND wbh.workspace_app_id = workspace_apps.id WHERE (wbh.id = $1 AND wbh.auth_token = $2) AND "workspace_apps"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
1:M 06 Oct 2025 18:28:30.075 * Background saving started by pid 41
bufferedLog 0 false
41:C 06 Oct 2025 18:28:30.121 * DB saved on disk
bufferedLog 0 false
41:C 06 Oct 2025 18:28:30.122 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 18:28:30.180 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 18:33:31.069 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 18:33:31.081 * Background saving started by pid 42
bufferedLog 0 false
2025-10-06 18:38:14.052 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
42:C 06 Oct 2025 18:33:31.138 * DB saved on disk
bufferedLog 0 false
2025-10-06 18:38:15.160 UTC [27] LOG:  checkpoint complete: wrote 12 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.050 s, sync=0.031 s, total=1.109 s; sync files=11, longest=0.008 s, average=0.003 s; distance=50 kB, estimate=231 kB; lsn=0/9AAE280, redo lsn=0/9AAE1F0
bufferedLog 0 false
42:C 06 Oct 2025 18:33:31.138 * Fork CoW for RDB: current 1 MB, peak 1 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 18:33:31.187 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 18:38:32.008 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
2025-10-06 18:43:14.232 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
1:M 06 Oct 2025 18:38:32.021 * Background saving started by pid 43
bufferedLog 0 false
2025-10-06 18:43:16.184 UTC [27] LOG:  checkpoint complete: wrote 20 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.893 s, sync=0.026 s, total=1.953 s; sync files=15, longest=0.005 s, average=0.002 s; distance=103 kB, estimate=218 kB; lsn=0/9AC81E8, redo lsn=0/9AC8158
bufferedLog 0 false
43:C 06 Oct 2025 18:38:32.094 * DB saved on disk
bufferedLog 0 false
43:C 06 Oct 2025 18:38:32.094 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 18:38:32.127 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 18:43:33.007 * 100 changes in 300 seconds. Saving...
2025-10-06 19:13:14.640 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
bufferedLog 0 false
2025-10-06 19:13:16.047 UTC [27] LOG:  checkpoint complete: wrote 15 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.356 s, sync=0.026 s, total=1.407 s; sync files=14, longest=0.007 s, average=0.002 s; distance=77 kB, estimate=204 kB; lsn=0/9ADB5B8, redo lsn=0/9ADB560
bufferedLog 0 false
1:M 06 Oct 2025 18:43:33.020 * Background saving started by pid 44
bufferedLog 0 false
44:C 06 Oct 2025 18:43:33.063 * DB saved on disk
bufferedLog 0 false
44:C 06 Oct 2025 18:43:33.063 * Fork CoW for RDB: current 1 MB, peak 1 MB, average 0 MB
bufferedLog 0 false
2025-10-06 19:18:14.137 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
1:M 06 Oct 2025 18:43:33.125 * Background saving terminated with success
bufferedLog 0 false
2025-10-06 19:18:15.341 UTC [27] LOG:  checkpoint complete: wrote 13 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.154 s, sync=0.024 s, total=1.205 s; sync files=12, longest=0.007 s, average=0.002 s; distance=61 kB, estimate=190 kB; lsn=0/9AEAD18, redo lsn=0/9AEACC0
bufferedLog 0 false
1:M 06 Oct 2025 18:48:34.083 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 18:48:34.093 * Background saving started by pid 45
bufferedLog 0 false
2025-10-06 19:21:05.024 UTC [15985] ERROR:  duplicate key value violates unique constraint "thread_participants_user_id_external_id_idx"
bufferedLog 0 false
45:C 06 Oct 2025 18:48:34.144 * DB saved on disk
bufferedLog 0 false
2025-10-06 19:21:05.024 UTC [15985] DETAIL:  Key (user_id, external_id)=(33hdYxwhTRldtVinXzghHJIHKha, BUG154) already exists.
bufferedLog 0 false
45:C 06 Oct 2025 18:48:34.144 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
2025-10-06 19:21:05.024 UTC [15985] STATEMENT:  INSERT INTO "thread_participants" ("created_at","updated_at","deleted_at","thread_id","user_id","external_id","last_read_id","last_seen_id","last_mention_message_id","subscription","archived_at","remind_at","remind_at_entry_id","starred_at","unread_at","stream_joined_at","pending_notify_at","mailboxes") VALUES (('2025-10-06 19:21:05.001908Z'),('2025-10-06 19:21:05.001908Z'),(null),('33FOc5fk4k3jEbsVLEQGonaeIyW'),('33hdYxwhTRldtVinXzghHJIHKha'),('BUG154'),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),('{}')) ON CONFLICT ("thread_id","user_id")  WHERE deleted_at IS NULL DO UPDATE SET "external_id"=COALESCE(excluded.external_id, thread_participants.external_id),"updated_at"="excluded"."updated_at" RETURNING "id"
bufferedLog 0 false
1:M 06 Oct 2025 18:48:34.199 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 18:53:35.088 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 18:53:35.104 * Background saving started by pid 46
bufferedLog 0 false
46:C 06 Oct 2025 18:53:35.154 * DB saved on disk
bufferedLog 0 false
46:C 06 Oct 2025 18:53:35.155 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 18:53:35.207 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 18:58:36.044 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 18:58:36.056 * Background saving started by pid 47
bufferedLog 0 false
2025-10-06 19:21:16.376 UTC [15985] ERROR:  duplicate key value violates unique constraint "thread_participants_user_id_external_id_idx"
bufferedLog 0 false
2025-10-06 19:21:16.376 UTC [15985] DETAIL:  Key (user_id, external_id)=(33hdYxwhTRldtVinXzghHJIHKha, BUG154) already exists.
bufferedLog 0 false
47:C 06 Oct 2025 18:58:36.109 * DB saved on disk
bufferedLog 0 false
47:C 06 Oct 2025 18:58:36.110 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
2025-10-06 19:21:16.376 UTC [15985] STATEMENT:  INSERT INTO "thread_participants" ("created_at","updated_at","deleted_at","thread_id","user_id","external_id","last_read_id","last_seen_id","last_mention_message_id","subscription","archived_at","remind_at","remind_at_entry_id","starred_at","unread_at","stream_joined_at","pending_notify_at","mailboxes") VALUES (('2025-10-06 19:21:16.373127Z'),('2025-10-06 19:21:16.373127Z'),(null),('33FOc5fk4k3jEbsVLEQGonaeIyW'),('33hdYxwhTRldtVinXzghHJIHKha'),('BUG154'),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),(null),('{}')) ON CONFLICT ("thread_id","user_id")  WHERE deleted_at IS NULL DO UPDATE SET "external_id"=COALESCE(excluded.external_id, thread_participants.external_id),"updated_at"="excluded"."updated_at" RETURNING "id"
bufferedLog 0 false
1:M 06 Oct 2025 18:58:36.158 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 19:03:37.002 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 19:03:37.019 * Background saving started by pid 48
bufferedLog 0 false
48:C 06 Oct 2025 19:03:37.067 * DB saved on disk
bufferedLog 0 false
48:C 06 Oct 2025 19:03:37.067 * Fork CoW for RDB: current 1 MB, peak 1 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 19:03:37.121 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 19:08:38.049 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 19:08:38.058 * Background saving started by pid 49
bufferedLog 0 false
49:C 06 Oct 2025 19:08:38.107 * DB saved on disk
bufferedLog 0 false
49:C 06 Oct 2025 19:08:38.108 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
2025-10-06 19:23:14.445 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
1:M 06 Oct 2025 19:08:38.163 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 19:13:39.097 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
2025-10-06 19:23:16.469 UTC [27] LOG:  checkpoint complete: wrote 21 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.982 s, sync=0.022 s, total=2.024 s; sync files=16, longest=0.005 s, average=0.002 s; distance=82 kB, estimate=179 kB; lsn=0/9AFF810, redo lsn=0/9AFF7B8
bufferedLog 0 false
1:M 06 Oct 2025 19:13:39.098 * Background saving started by pid 50
bufferedLog 0 false
50:C 06 Oct 2025 19:13:39.131 * DB saved on disk
bufferedLog 0 false
50:C 06 Oct 2025 19:13:39.132 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 19:13:39.200 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 19:18:40.004 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
2025-10-06 19:28:14.576 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 19:28:15.686 UTC [27] LOG:  checkpoint complete: wrote 12 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.066 s, sync=0.020 s, total=1.111 s; sync files=9, longest=0.007 s, average=0.003 s; distance=43 kB, estimate=165 kB; lsn=0/9B0A5D0, redo lsn=0/9B0A578
bufferedLog 0 false
1:M 06 Oct 2025 19:18:40.013 * Background saving started by pid 51
bufferedLog 0 false
51:C 06 Oct 2025 19:18:40.063 * DB saved on disk
bufferedLog 0 false
51:C 06 Oct 2025 19:18:40.063 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 19:18:40.119 * Background saving terminated with success
bufferedLog 0 false
1:M 06 Oct 2025 19:23:41.077 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 19:23:41.087 * Background saving started by pid 52
bufferedLog 0 false
52:C 06 Oct 2025 19:23:41.133 * DB saved on disk
bufferedLog 0 false
52:C 06 Oct 2025 19:23:41.134 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [x-pack-ml]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
1:M 06 Oct 2025 19:23:41.192 * Background saving terminated with success
bufferedLog 0 false
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [lang-mustache]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:28:42.097 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 19:28:42.114 * Background saving started by pid 53
bufferedLog 0 false
53:C 06 Oct 2025 19:28:42.150 * DB saved on disk
bufferedLog 0 false
53:C 06 Oct 2025 19:28:42.150 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [legacy-geo]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:28:42.220 * Background saving terminated with success
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [x-pack-ql]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:33:43.020 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [rank-rrf]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:33:43.038 * Background saving started by pid 54
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [analysis-common]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
54:C 06 Oct 2025 19:33:43.088 * DB saved on disk
bufferedLog 0 false
54:C 06 Oct 2025 19:33:43.088 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
bufferedLog 0 false
1:M 06 Oct 2025 19:33:43.142 * Background saving terminated with success
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [health-shards-availability]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [transport-netty4]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [aggregations]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [ingest-common]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [frozen-indices]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [x-pack-identity-provider]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:38:44.055 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [x-pack-shutdown]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:38:44.062 * Background saving started by pid 55
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.660Z", "log.level": "INFO", "message":"loaded module [x-pack-text-structure]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
55:C 06 Oct 2025 19:38:44.119 * DB saved on disk
bufferedLog 0 false
55:C 06 Oct 2025 19:38:44.119 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [snapshot-repo-test-kit]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:38:44.168 * Background saving terminated with success
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [ml-package-loader]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [kibana]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [constant-keyword]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:43:45.099 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [x-pack-logstash]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [x-pack-ccr]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [x-pack-graph]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:43:45.114 * Background saving started by pid 56
bufferedLog 0 false
56:C 06 Oct 2025 19:43:45.164 * DB saved on disk
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [x-pack-esql]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [parent-join]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [counted-keyword]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [x-pack-enrich]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
56:C 06 Oct 2025 19:43:45.165 * Fork CoW for RDB: current 0 MB, peak 0 MB, average 0 MB
bufferedLog 0 false
1:M 06 Oct 2025 19:43:45.220 * Background saving terminated with success
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [repositories-metering-api]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:48:46.048 * 100 changes in 300 seconds. Saving...
bufferedLog 0 false
1:M 06 Oct 2025 19:48:46.065 * Background saving started by pid 57
bufferedLog 0 false
57:C 06 Oct 2025 19:48:46.119 * DB saved on disk
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [transform]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [repository-azure]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [repository-gcs]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
57:C 06 Oct 2025 19:48:46.120 * Fork CoW for RDB: current 1 MB, peak 1 MB, average 0 MB
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [spatial]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
1:M 06 Oct 2025 19:48:46.170 * Background saving terminated with success
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [apm]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [mapper-extras]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [mapper-version]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [x-pack-rollup]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [percolator]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.661Z", "log.level": "INFO", "message":"loaded module [data-streams]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [x-pack-stack]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [rank-eval]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [reindex]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [x-pack-security]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [blob-cache]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [searchable-snapshots]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [x-pack-slm]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
  'process.env.VITE_STRIPE_PUBLIC_KEY': '"pk_test_51PVxrhCSZYH8WWml1WANsArindBCWJBuOoBYpx60HjgsFO8RI5DjujnzD8aoPbeFiT5AKppvl5hXv72xkIbqYFmZ005kU2BJWf"',
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [snapshot-based-recoveries]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.662Z", "log.level": "INFO", "message":"loaded module [x-pack-watcher]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [old-lucene-versions]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
  'process.env.VITE_NATIVE_VERSION_NUMBER': '"210"'
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-ilm]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-inference]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-voting-only-node]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-deprecation]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-fleet]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
Merged public-env contents for environment: development
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-aggregate-metric]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-downsample]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-profiling]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [ingest-geoip]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-write-load-forecaster]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
bufferedLog 0 false
[STARTED] Parse Configuration
bufferedLog 0 false
[SUCCESS] Parse Configuration
bufferedLog 0 false
[STARTED] Generate outputs
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [search-business-rules]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [ingest-attachment]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [wildcard]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
[STARTED] Generate to src/generated/schema.graphql
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-types.ts
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-apm-data]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-operations.ts
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-apollo-helpers.ts
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [unsigned-long]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-possible-types.ts
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-sql]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
[STARTED] Load GraphQL schemas
bufferedLog 0 false
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [runtime-fields-common]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-async]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
  ROLLDOWN-VITE v7.1.4  ready in 517 ms
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [vector-tile]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
  ➜  Local:   http://localhost:3000/
bufferedLog 0 false
  ➜  Network: http://192.168.107.2:3000/
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [lang-expression]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.663Z", "log.level": "INFO", "message":"loaded module [x-pack-eql]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.plugins.PluginsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.992Z", "log.level": "INFO", "message":"using [1] data paths, mounts [[/usr/share/elasticsearch/data (/dev/vdb1)]], net usable_space [55.5gb], net total_space [105.4gb], types [btrfs]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.env.NodeEnvironment","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:30.993Z", "log.level": "INFO", "message":"heap size [5.8gb], compressed ordinary object pointers [true]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.env.NodeEnvironment","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:31.023Z", "log.level": "INFO", "message":"node name [e64405b11e33], node ID [ZJSNEgu_Quak0S9qYkQYkw], cluster name [docker-cluster], roles [data_cold, ingest, data_frozen, ml, data_hot, transform, data_content, data_warm, master, remote_cluster_client, data]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.node.Node","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.368Z", "log.level": "INFO", "message":"Registered local node features [data_stream.auto_sharding, data_stream.lifecycle.global_retention, data_stream.rollover.lazy, desired_node.version_deprecated, esql.agg_values, esql.async_query, esql.base64_decode_encode, esql.disable_nullable_opts, esql.from_options, esql.metadata_fields, esql.mv_sort, esql.spatial_points_from_source, esql.spatial_shapes, esql.st_centroid_agg, esql.st_contains_within, esql.st_disjoint, esql.st_intersects, esql.st_x_y, esql.string_literal_auto_casting, esql.string_literal_auto_casting_extended, features_supported, file_settings, health.dsl.info, health.extended_repository_indicator, knn_retriever_supported, license-trial-independent-version, retrievers_supported, rrf_retriever_supported, standard_retriever_supported, usage.data_tiers.precalculate_stats]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.features.FeatureService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.487Z", "log.level": "INFO", "message":"[controller/97] [Main.cc@123] controller (64 bit): Version 8.14.3 (Build 1616e0f82a0245) Copyright (c) 2024 Elasticsearch BV", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"ml-cpp-log-tail-thread","log.logger":"org.elasticsearch.xpack.ml.process.logging.CppLogMessageHandler","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.638Z", "log.level": "INFO", "message":"Sending apm metrics is disabled", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.telemetry.apm.APM","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.638Z", "log.level": "INFO", "message":"Sending apm tracing is disabled", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.telemetry.apm.APM","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.647Z", "log.level": "INFO", "message":"Security is disabled", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.xpack.security.Security","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.771Z", "log.level": "INFO", "message":"Watcher initialized components at 2025-10-06T16:39:32.770Z", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.xpack.watcher.Watcher","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.801Z", "log.level": "INFO", "message":"Profiling is enabled", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.xpack.profiling.ProfilingPlugin","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.809Z", "log.level": "INFO", "message":"profiling index templates will not be installed or reinstalled", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.xpack.profiling.ProfilingPlugin","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:32.812Z", "log.level": "INFO", "message":"APM ingest plugin is disabled", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.xpack.apmdata.APMPlugin","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.029Z", "log.level": "INFO", "message":"creating NettyAllocator with the following configs: [name=elasticsearch_configured, chunk_size=1mb, suggested_max_allocation_size=1mb, factors={es.unsafe.use_netty_default_chunk_and_page_size=false, g1gc_enabled=true, g1gc_region_size=4mb}]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.transport.netty4.NettyAllocator","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.042Z", "log.level": "INFO", "message":"using rate limit [40mb] with [default=40mb, read=0b, write=0b, max=0b]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.indices.recovery.RecoverySettings","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.060Z", "log.level": "INFO", "message":"using discovery type [single-node] and seed hosts providers [settings]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.discovery.DiscoveryModule","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
{"@timestamp":"2025-10-06T16:39:33.534Z", "log.level": "INFO", "message":"initialized", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.node.Node","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.534Z", "log.level": "INFO", "message":"starting ...", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.node.Node","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.556Z", "log.level": "INFO", "message":"persistent cache index loaded", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.xpack.searchablesnapshots.cache.full.PersistentCache","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.556Z", "log.level": "INFO", "message":"deprecation component started", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.xpack.deprecation.logging.DeprecationIndexingComponent","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.589Z", "log.level": "INFO", "message":"publish_address {192.168.117.2:9300}, bound_addresses {[::]:9300}", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.transport.TransportService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.712Z", "log.level": "INFO", "message":"this node is locked into cluster UUID [hKpCVg3GTEOKYRe5Cy7Oew] and will not attempt further cluster bootstrapping", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.cluster.coordination.ClusterBootstrapService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-types.ts
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.772Z", "log.level": "INFO", "message":"elected-as-master ([1] nodes joined in term 42)[_FINISH_ELECTION_, {e64405b11e33}{ZJSNEgu_Quak0S9qYkQYkw}{7aFrQ9inReKJ3DiduzLc8A}{e64405b11e33}{192.168.117.2}{192.168.117.2:9300}{cdfhilmrstw}{8.14.3}{7000099-8505000} completing election], term: 42, version: 724, delta: master node changed {previous [], current [{e64405b11e33}{ZJSNEgu_Quak0S9qYkQYkw}{7aFrQ9inReKJ3DiduzLc8A}{e64405b11e33}{192.168.117.2}{192.168.117.2:9300}{cdfhilmrstw}{8.14.3}{7000099-8505000}]}", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][masterService#updateTask][T#1]","log.logger":"org.elasticsearch.cluster.service.MasterService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Generate to src/generated/schema.graphql
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-operations.ts
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-apollo-helpers.ts
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.816Z", "log.level": "INFO", "message":"master node changed {previous [], current [{e64405b11e33}{ZJSNEgu_Quak0S9qYkQYkw}{7aFrQ9inReKJ3DiduzLc8A}{e64405b11e33}{192.168.117.2}{192.168.117.2:9300}{cdfhilmrstw}{8.14.3}{7000099-8505000}]}, term: 42, version: 724, reason: Publication{term=42, version=724}", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][clusterApplierService#updateTask][T#1]","log.logger":"org.elasticsearch.cluster.service.ClusterApplierService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-possible-types.ts
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.828Z", "log.level": "INFO", "message":"starting file watcher ...", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][clusterApplierService#updateTask][T#1]","log.logger":"org.elasticsearch.common.file.AbstractFileWatchingService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Generate outputs
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.829Z", "log.level": "INFO", "message":"file settings service up and running [tid=59]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[file-watcher[/usr/share/elasticsearch/config/operator/settings.json]]","log.logger":"org.elasticsearch.common.file.AbstractFileWatchingService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.830Z", "log.level": "INFO", "message":"setting file [/usr/share/elasticsearch/config/operator/settings.json] not found, initializing [file_settings] as empty", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[file-watcher[/usr/share/elasticsearch/config/operator/settings.json]]","log.logger":"org.elasticsearch.reservedstate.service.FileSettingsService","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.831Z", "log.level": "INFO", "message":"node-join: [{e64405b11e33}{ZJSNEgu_Quak0S9qYkQYkw}{7aFrQ9inReKJ3DiduzLc8A}{e64405b11e33}{192.168.117.2}{192.168.117.2:9300}{cdfhilmrstw}{8.14.3}{7000099-8505000}] with reason [completing election]", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][masterService#updateTask][T#1]","log.logger":"org.elasticsearch.cluster.coordination.NodeJoinExecutor","elasticsearch.cluster.uuid":"hKpCVg3GTEOKYRe5Cy7Oew","elasticsearch.node.id":"ZJSNEgu_Quak0S9qYkQYkw","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
  ℹ Watching for changes in /app...
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.833Z", "log.level": "INFO", "message":"publish_address {192.168.117.2:9200}, bound_addresses {[::]:9200}", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.http.AbstractHttpServerTransport","elasticsearch.cluster.uuid":"hKpCVg3GTEOKYRe5Cy7Oew","elasticsearch.node.id":"ZJSNEgu_Quak0S9qYkQYkw","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Parse Configuration
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.840Z", "log.level": "INFO", "message":"started {e64405b11e33}{ZJSNEgu_Quak0S9qYkQYkw}{7aFrQ9inReKJ3DiduzLc8A}{e64405b11e33}{192.168.117.2}{192.168.117.2:9300}{cdfhilmrstw}{8.14.3}{7000099-8505000}{ml.machine_memory=12590579712, ml.allocated_processors=12, ml.allocated_processors_double=12.0, ml.max_jvm_size=6295650304, ml.config_version=12.0.0, xpack.installed=true, transform.config_version=10.0.0}", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"main","log.logger":"org.elasticsearch.node.Node","elasticsearch.cluster.uuid":"hKpCVg3GTEOKYRe5Cy7Oew","elasticsearch.node.id":"ZJSNEgu_Quak0S9qYkQYkw","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[SUCCESS] Parse Configuration
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.981Z", "log.level": "INFO", "message":"license [99c88758-2974-44de-a976-2c1ed0c1d60a] mode [basic] - valid", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][clusterApplierService#updateTask][T#1]","log.logger":"org.elasticsearch.license.ClusterStateLicenseService","elasticsearch.cluster.uuid":"hKpCVg3GTEOKYRe5Cy7Oew","elasticsearch.node.id":"ZJSNEgu_Quak0S9qYkQYkw","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:33.983Z", "log.level": "INFO", "message":"recovered [1] indices into cluster_state", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][masterService#updateTask][T#1]","log.logger":"org.elasticsearch.gateway.GatewayService","elasticsearch.cluster.uuid":"hKpCVg3GTEOKYRe5Cy7Oew","elasticsearch.node.id":"ZJSNEgu_Quak0S9qYkQYkw","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Generate outputs
bufferedLog 0 false
[STARTED] Generate to src/generated/schema.graphql
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-types.ts
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:34.220Z", "log.level": "INFO", "message":"Node [{e64405b11e33}{ZJSNEgu_Quak0S9qYkQYkw}] is selected as the current health node.", "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][management][T#2]","log.logger":"org.elasticsearch.health.node.selection.HealthNodeTaskExecutor","elasticsearch.cluster.uuid":"hKpCVg3GTEOKYRe5Cy7Oew","elasticsearch.node.id":"ZJSNEgu_Quak0S9qYkQYkw","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-operations.ts
bufferedLog 0 false
{"@timestamp":"2025-10-06T16:39:34.448Z", "log.level": "INFO",  "current.health":"GREEN","message":"Cluster health status changed from [RED] to [GREEN] (reason: [shards started [[messages-003][11]]]).","previous.health":"RED","reason":"shards started [[messages-003][11]]" , "ecs.version": "1.2.0","service.name":"ES_ECS","event.dataset":"elasticsearch.server","process.thread.name":"elasticsearch[e64405b11e33][masterService#updateTask][T#1]","log.logger":"org.elasticsearch.cluster.routing.allocation.AllocationService","elasticsearch.cluster.uuid":"hKpCVg3GTEOKYRe5Cy7Oew","elasticsearch.node.id":"ZJSNEgu_Quak0S9qYkQYkw","elasticsearch.node.name":"e64405b11e33","elasticsearch.cluster.name":"docker-cluster"}
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-apollo-helpers.ts
bufferedLog 0 false
[STARTED] Generate to src/generated/graphql-possible-types.ts
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
[STARTED] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[SUCCESS] Load GraphQL schemas
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
[STARTED] Load GraphQL documents
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
[SUCCESS] Load GraphQL documents
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[STARTED] Generate
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-types.ts
bufferedLog 0 false
[SUCCESS] Generate to src/generated/schema.graphql
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-operations.ts
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-apollo-helpers.ts
bufferedLog 0 false
[SUCCESS] Generate to src/generated/graphql-possible-types.ts
bufferedLog 0 false
[SUCCESS] Generate outputs
bufferedLog 0 false
  ℹ Watching for changes in /app...
bufferedLog 0 false
`transformWithEsbuild` is deprecated and will be removed in the future. Please migrate to `transformWithOxc`.
bufferedLog 0 false
[90mOct  6 19:51:09.453315[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mf99d9b7cd3369e1cf02e1d3690fce849-852a62f03e65381c-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:51:39.523710[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m65e3cce96456b10da90a1e739406e2f7-99a366002d9ee6ef-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:52:02.337559[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcheckout.session.completed [36mrequest_id=[0me3ab41af [36mstripeID=[0mevt_1SFKRxCSZYH8WWmlIDljqSGn
bufferedLog 0 false
[90mOct  6 19:52:02.342427[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m2.206568 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:202"] [36mrequest_id=[0me3ab41af [36mspan_id=[0ma8697307558fb9b6 [36mtrace_id=[0mecc4d3e99cf8c404da9a3a9dcb09c698
bufferedLog 0 false
2025/10/06 19:52:02 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[2.457ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrkiq3Pv736eYxMOlccONZy7m' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:52:02.345104[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:02Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m23.363423 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0me3ab41af [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:52:02.468324[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.created [36mrequest_id=[0mbc1fb008 [36mstripeID=[0mevt_1SFKRyCSZYH8WWmlLC8Gxe9a
bufferedLog 0 false
[90mOct  6 19:52:02.472461[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m3.553184 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0mbc1fb008 [36mspan_id=[0m1361cd659c4ee681 [36mtrace_id=[0m0378a9145ce55a94cd499a8273cc7a0f
bufferedLog 0 false
[90mOct  6 19:52:02.473418[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:02Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m5.963043 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mbc1fb008 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:52:02.496222[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 2957 bytes for traces/stripe/evt_1SFKRxCSZYH8WWmlIDljqSGn[0m [36mrequest_id=[0me3ab41af
bufferedLog 0 false
[90mOct  6 19:52:02.546714[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 935 bytes for traces/stripe/evt_1SFKRyCSZYH8WWmlLC8Gxe9a[0m [36mrequest_id=[0mbc1fb008
bufferedLog 0 false
[90mOct  6 19:52:03.176049[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.updated [36mrequest_id=[0m87fcfad9 [36mstripeID=[0mevt_1SFKRyCSZYH8WWmlFODrWSel
bufferedLog 0 false
[90mOct  6 19:52:03.178326[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:81[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE stripe_customer->>'id' = $1 AND "workspace_subscriptions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m1.150659 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:81","/app/pkg/handlers/stripe.go:126","/app/pkg/handlers/stripe.go:217"] [36mrequest_id=[0m87fcfad9 [36mspan_id=[0md1285844dbfbac67 [36mtrace_id=[0mff0eddd78523372a75e6bcdf5c5a0bd4
bufferedLog 0 false
[90mOct  6 19:52:03.180396[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:03Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m5.859501 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m87fcfad9 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:52:03.217534[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 949 bytes for traces/stripe/evt_1SFKRyCSZYH8WWmlFODrWSel[0m [36mrequest_id=[0m87fcfad9
bufferedLog 0 false
[90mOct  6 19:52:03.881986[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0minvoice.paid [36mrequest_id=[0m1aac195a [36mstripeID=[0mevt_1SFKRzCSZYH8WWmlE4CR9oQE
bufferedLog 0 false
[90mOct  6 19:52:03.883771[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:03Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m2.611483 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m1aac195a [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:52:03.928493[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 5479 bytes for traces/stripe/evt_1SFKRzCSZYH8WWmlE4CR9oQE[0m [36mrequest_id=[0m1aac195a
bufferedLog 0 false
[90mOct  6 19:52:04.219517[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.created [36mrequest_id=[0mc8c97dd5 [36mstripeID=[0mevt_1SFKRzCSZYH8WWmlw5tIDx3W
bufferedLog 0 false
2025/10/06 19:52:04 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[1.284ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrkiq3Pv736eYxMOlccONZy7m' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:52:04.222352[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.075326 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:257"] [36mrequest_id=[0mc8c97dd5 [36mspan_id=[0m57a48b0c40d1399c [36mtrace_id=[0m76f9b26d854644c67498b835f3ef36d5
bufferedLog 0 false
[90mOct  6 19:52:04.224005[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:04Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m5.842627 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mc8c97dd5 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:52:04.269284[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3816 bytes for traces/stripe/evt_1SFKRzCSZYH8WWmlw5tIDx3W[0m [36mrequest_id=[0mc8c97dd5
bufferedLog 0 false
[90mOct  6 19:52:09.603284[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m758579aee2f72db311e211fe17f20aa8-e7132ff6d5d1ba66-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:52:14.592041[0m [34mTRC[0m [1mpkg/repository/user/repository.go:108[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id = $1 AND "users"."deleted_at" IS NULL LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m8.21261 [36mlocation=[0m["/app/pkg/repository/user/repository.go:108","/app/pkg/operations/user/userutils/userutils.go:28","/app/pkg/operations/auth/auth.go:133"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m69856b1c9cea6abb [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.597851[0m DBG [1mpkg/handlers/graphql.go:234[0m[36m >[0m Processing GraphQL [36mOperations=[0m[{"operationName":"NotificationCounts","query":"query NotificationCounts {\n  notifications(filter: {feedType: all}) {\n    totalCount\n    unreadCount\n    unseenCount\n    __typename\n  }\n  joinApprovals {\n    totalCount\n    __typename\n  }\n}","variables":{}},{"operationName":"MailboxCounts","query":"query MailboxCounts {\n  mentionedThreads: threads(filter: {mailbox: mentioned}) {\n    totalCount\n    __typename\n  }\n  unreadInbox: threads(filter: {mailbox: unread}) {\n    totalCount\n    __typename\n  }\n  unseenFeed: threads(filter: {mailbox: unseen, excludePersistentChats: true}) {\n    totalCount\n    __typename\n  }\n}","variables":{}},{"operationName":"PersistentChats","query":"query PersistentChats($chatType: ChatType = group, $last: Int, $before: String, $order: ThreadsOrder) {\n  persistentChats(\n    filter: {chatType: $chatType}\n    last: $last\n    before: $before\n    order: $order\n  ) {\n    totalCount\n    unreadCounts {\n      ...UnreadCountFields\n      __typename\n    }\n    pageInfo {\n      startCursor\n      endCursor\n      hasPreviousPage\n      hasNextPage\n      __typename\n    }\n    edges {\n      ...ThreadEdgeFields\n      node {\n        ...ThreadSimpleFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment UnreadCountFields on UnreadCounts {\n  mentioned\n  total\n  unseen\n  __typename\n}\n\nfragment ThreadEdgeFields on ThreadEdge {\n  id\n  cursor\n  recipientRole\n  isArchived\n  remindAt\n  isStarred\n  isRead\n  isSeen\n  lastReadID\n  lastSeenID\n  subscription\n  aiSessionID\n  unreadMessageCounts {\n    ...UnreadCountFields\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadSimpleFields on Thread {\n  ...ThreadCommonFields\n  __typename\n}\n\nfragment ThreadCommonFields on Thread {\n  id\n  subject\n  isPersistentChat\n  isSlack\n  replyToMessage {\n    ...MessageFields\n    __typename\n  }\n  firstMessage {\n    ...MessageFields\n    __typename\n  }\n  lastMessage {\n    ...MessageFields\n    __typename\n  }\n  messageableBy\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  recipientsAddable\n  workspaceID\n  createdAt\n  closedAt\n  closedBy {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment MessageFields on Message {\n  id\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  threadID\n  streamID\n  quotedMessage {\n    ...QuotedMessageFields\n    __typename\n  }\n  replyThreadID\n  ownReactions {\n    ...ReactionsFields\n    __typename\n  }\n  reactions {\n    edges {\n      node {\n        ...ReactionsFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  reactionCounts {\n    c\n    r\n    __typename\n  }\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}\n\nfragment QuotedMessageFields on QuotedMessage {\n  id\n  streamID\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment FileFields on File {\n  id\n  url\n  name\n  fileType\n  contentType\n  contentLength\n  metadata {\n    width\n    height\n    blurHash\n    __typename\n  }\n  previewable\n  __typename\n}\n\nfragment ExternalObjectFields on ExternalObject {\n  id\n  url\n  objectType\n  title\n  description\n  previewText\n  statusText\n  siteName\n  layout\n  icon {\n    url\n    __typename\n  }\n  statusIcon {\n    url\n    __typename\n  }\n  image {\n    url\n    blurHash\n    __typename\n  }\n  video {\n    url\n    contentType\n    __typename\n  }\n  audio {\n    url\n    contentType\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadPreviewFields on ThreadPreview {\n  id\n  name\n  subject\n  admin {\n    ...UserFields\n    __typename\n  }\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  __typename\n}\n\nfragment RecipientFields on Recipient {\n  ... on User {\n    ...UserFields\n    __typename\n  }\n  ... on GroupPreview {\n    ...GroupPreviewFields\n    __typename\n  }\n  ... on WorkspacePreview {\n    ...WorkspacePreviewFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupPreviewFields on GroupPreview {\n  id\n  name\n  description\n  workspaceID\n  joinableBy\n  memberCount\n  messageableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  admin {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment SlackChannelFields on SlackChannel {\n  id\n  teamID\n  __typename\n}\n\nfragment WorkspacePreviewFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ReactionsFields on Reaction {\n  id\n  type\n  user {\n    ...UserFields\n    __typename\n  }\n  __typename\n}","variables":{"chatType":"user","last":9,"order":"unread"}},{"operationName":"FetchJoinApprovals","query":"query FetchJoinApprovals {\n  joinApprovals {\n    totalCount\n    edges {\n      node {\n        ...JoinApprovalFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment JoinApprovalFields on JoinApproval {\n  ...JoinApprovalCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  joining {\n    ...RecipientFields\n    __typename\n  }\n  joinable {\n    ... on GroupPreview {\n      ...GroupPreviewFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    ... on WorkspacePreview {\n      ...WorkspacePreviewFields\n      __typename\n    }\n    __typename\n  }\n  requester {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment JoinApprovalCommonFields on JoinApproval {\n  id\n  adminApprovedAt\n  joiningApprovedAt\n  requestedAt\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}\n\nfragment RecipientFields on Recipient {\n  ... on User {\n    ...UserFields\n    __typename\n  }\n  ... on GroupPreview {\n    ...GroupPreviewFields\n    __typename\n  }\n  ... on WorkspacePreview {\n    ...WorkspacePreviewFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupPreviewFields on GroupPreview {\n  id\n  name\n  description\n  workspaceID\n  joinableBy\n  memberCount\n  messageableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  admin {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment SlackChannelFields on SlackChannel {\n  id\n  teamID\n  __typename\n}\n\nfragment WorkspacePreviewFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadPreviewFields on ThreadPreview {\n  id\n  name\n  subject\n  admin {\n    ...UserFields\n    __typename\n  }\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  __typename\n}","variables":{}},{"operationName":"ThreadList","query":"query ThreadList($mailbox: ThreadsMailbox = all, $recipientID: ID, $excludeChats: Boolean, $excludeStarred: Boolean, $limit: Int = 15, $before: String, $order: ThreadsOrder) {\n  threads(\n    filter: {excludePersistentChats: $excludeChats, excludeStarred: $excludeStarred, mailbox: $mailbox, recipientID: $recipientID}\n    last: $limit\n    before: $before\n    order: $order\n  ) {\n    totalCount\n    pageInfo {\n      startCursor\n      endCursor\n      hasPreviousPage\n      hasNextPage\n      __typename\n    }\n    edges {\n      ...ThreadEdgeFields\n      node {\n        ...ThreadSimpleFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment ThreadEdgeFields on ThreadEdge {\n  id\n  cursor\n  recipientRole\n  isArchived\n  remindAt\n  isStarred\n  isRead\n  isSeen\n  lastReadID\n  lastSeenID\n  subscription\n  aiSessionID\n  unreadMessageCounts {\n    ...UnreadCountFields\n    __typename\n  }\n  __typename\n}\n\nfragment UnreadCountFields on UnreadCounts {\n  mentioned\n  total\n  unseen\n  __typename\n}\n\nfragment ThreadSimpleFields on Thread {\n  ...ThreadCommonFields\n  __typename\n}\n\nfragment ThreadCommonFields on Thread {\n  id\n  subject\n  isPersistentChat\n  isSlack\n  replyToMessage {\n    ...MessageFields\n    __typename\n  }\n  firstMessage {\n    ...MessageFields\n    __typename\n  }\n  lastMessage {\n    ...MessageFields\n    __typename\n  }\n  messageableBy\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  recipientsAddable\n  workspaceID\n  createdAt\n  closedAt\n  closedBy {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment MessageFields on Message {\n  id\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  threadID\n  streamID\n  quotedMessage {\n    ...QuotedMessageFields\n    __typename\n  }\n  replyThreadID\n  ownReactions {\n    ...ReactionsFields\n    __typename\n  }\n  reactions {\n    edges {\n      node {\n        ...ReactionsFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  reactionCounts {\n    c\n    r\n    __typename\n  }\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}\n\nfragment QuotedMessageFields on QuotedMessage {\n  id\n  streamID\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment FileFields on File {\n  id\n  url\n  name\n  fileType\n  contentType\n  contentLength\n  metadata {\n    width\n    height\n    blurHash\n    __typename\n  }\n  previewable\n  __typename\n}\n\nfragment ExternalObjectFields on ExternalObject {\n  id\n  url\n  objectType\n  title\n  description\n  previewText\n  statusText\n  siteName\n  layout\n  icon {\n    url\n    __typename\n  }\n  statusIcon {\n    url\n    __typename\n  }\n  image {\n    url\n    blurHash\n    __typename\n  }\n  video {\n    url\n    contentType\n    __typename\n  }\n  audio {\n    url\n    contentType\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadPreviewFields on ThreadPreview {\n  id\n  name\n  subject\n  admin {\n    ...UserFields\n    __typename\n  }\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  __typename\n}\n\nfragment RecipientFields on Recipient {\n  ... on User {\n    ...UserFields\n    __typename\n  }\n  ... on GroupPreview {\n    ...GroupPreviewFields\n    __typename\n  }\n  ... on WorkspacePreview {\n    ...WorkspacePreviewFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupPreviewFields on GroupPreview {\n  id\n  name\n  description\n  workspaceID\n  joinableBy\n  memberCount\n  messageableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  admin {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment SlackChannelFields on SlackChannel {\n  id\n  teamID\n  __typename\n}\n\nfragment WorkspacePreviewFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ReactionsFields on Reaction {\n  id\n  type\n  user {\n    ...UserFields\n    __typename\n  }\n  __typename\n}","variables":{"excludeChats":true,"excludeStarred":true,"limit":19,"mailbox":"inbox","order":"lastMessage"}},{"operationName":"ThreadList","query":"query ThreadList($mailbox: ThreadsMailbox = all, $recipientID: ID, $excludeChats: Boolean, $excludeStarred: Boolean, $limit: Int = 15, $before: String, $order: ThreadsOrder) {\n  threads(\n    filter: {excludePersistentCFields on ExternalObject {\n  id\n  url\n  objectType\n  title\n  description\n  previewText\n  statusText\n  siteName\n  layout\n  icon {\n    url\n    __typename\n  }\n  statusIcon {\n    url\n    __typename\n  }\n  image {\n    url\n    blurHash\n    __typename\n  }\n  video {\n    url\n    contentType\n    __typename\n  }\n  audio {\n    url\n    contentType\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadPreviewFields on ThreadPreview {\n  id\n  name\n  subject\n  admin {\n    ...UserFields\n    __typename\n  }\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  __typename\n}\n\nfragment RecipientFields on Recipient {\n  ... on User {\n    ...UserFields\n    __typename\n  }\n  ... on GroupPreview {\n    ...GroupPreviewFields\n    __typename\n  }\n  ... on WorkspacePreview {\n    ...WorkspacePreviewFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupPreviewFields on GroupPreview {\n  id\n  name\n  description\n  workspaceID\n  joinableBy\n  memberCount\n  messageableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  admin {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment SlackChannelFields on SlackChannel {\n  id\n  teamID\n  __typename\n}\n\nfragment WorkspacePreviewFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ReactionsFields on Reaction {\n  id\n  type\n  user {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadEdgeFields on ThreadEdge {\n  id\n  cursor\n  recipientRole\n  isArchived\n  remindAt\n  isStarred\n  isRead\n  isSeen\n  lastReadID\n  lastSeenID\n  subscription\n  aiSessionID\n  unreadMessageCounts {\n    ...UnreadCountFields\n    __typename\n  }\n  __typename\n}\n\nfragment UnreadCountFields on UnreadCounts {\n  mentioned\n  total\n  unseen\n  __typename\n}","variables":{"filter":{"mutualGroups":true,"mutualWorkspaces":true}}},{"operationName":"WorkspaceSubscriptionQuery","query":"query WorkspaceSubscriptionQuery($workspaceID: ID!) {\n  workspaceSubscription(workspaceID: $workspaceID) {\n    ...WorkspaceSubscriptionFields\n    __typename\n  }\n}\n\nfragment WorkspaceSubscriptionFields on WorkspaceSubscription {\n  id\n  plan {\n    ...SubscriptionPlanFields\n    __typename\n  }\n  status\n  quantity\n  workspaceID\n  cancelAtPeriodEnd\n  currentPeriodStart\n  currentPeriodEnd\n  entitlements {\n    ...EntitlementFields\n    __typename\n  }\n  latestInvoice {\n    ...InvoiceFields\n    __typename\n  }\n  nextInvoice {\n    ...InvoiceFields\n    __typename\n  }\n  __typename\n}\n\nfragment SubscriptionPlanFields on SubscriptionPlan {\n  id\n  name\n  description\n  interval\n  amount\n  currency\n  __typename\n}\n\nfragment EntitlementFields on SubscriptionEntitlements {\n  features\n  capabilities {\n    ...SubscriptionCapabilityFields\n    __typename\n  }\n  __typename\n}\n\nfragment SubscriptionCapabilityFields on SubscriptionCapability {\n  name\n  value\n  limit\n  __typename\n}\n\nfragment InvoiceFields on Invoice {\n  id\n  periodStart\n  periodEnd\n  description\n  total\n  currency\n  status\n  __typename\n}","variables":{"workspaceID":"wks_31YmbjjiTs9HWaYD7726C4zXLOJ"}},{"operationName":"CustomEmojis","query":"query CustomEmojis($after: String, $first: Int = 200) {\n  customEmojis(after: $after, first: $first) {\n    edges {\n      node {\n        ...CustomEmojiFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment CustomEmojiFields on CustomEmoji {\n  id\n  createdAt\n  imageURL\n  name\n  workspaceID\n  createdBy {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}","variables":{"first":300}}] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.601018[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mPersistentChats [36mrequest_id=[0m19afee9d [36mvariables=[0m{"chatType":"user","last":9,"order":"unread"}
bufferedLog 0 false
[90mOct  6 19:52:14.601161[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mFetchJoinApprovals [36mrequest_id=[0m19afee9d [36mvariables=[0m{}
bufferedLog 0 false
[90mOct  6 19:52:14.602958[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mMailboxCounts [36mrequest_id=[0m19afee9d [36mvariables=[0m{}
bufferedLog 0 false
[90mOct  6 19:52:14.603737[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mThreadList [36mrequest_id=[0m19afee9d [36mvariables=[0m{"limit":19,"mailbox":"starred","order":"unread"}
bufferedLog 0 false
[90mOct  6 19:52:14.604008[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mCustomEmojis [36mrequest_id=[0m19afee9d [36mvariables=[0m{"first":300}
bufferedLog 0 false
[90mOct  6 19:52:14.604242[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT "group_id" FROM "group_members" WHERE (role = $3 AND user_id = $4) AND "group_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.604454[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT "thread_id" FROM "thread_recipients" WHERE (role = $5 AND recipient_user_id = $6) AND "thread_recipients"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.604587[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT "workspace_id" FROM "workspace_members" WHERE (role = $7 AND user_id = $8) AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_members [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.604813[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mFetchUsers [36mrequest_id=[0m19afee9d [36mvariables=[0m{"filter":{"mutualGroups":true,"mutualWorkspaces":true}}
bufferedLog 0 false
hats: $excludeChats, excludeStarred: $excludeStarred, mailbox: $mailbox, recipientID: $recipientID}\n    last: $limit\n    before: $before\n    order: $order\n  ) {\n    totalCount\n    pageInfo {\n      startCursor\n      endCursor\n      hasPreviousPage\n      hasNextPage\n      __typename\n    }\n    edges {\n      ...ThreadEdgeFields\n      node {\n        ...ThreadSimpleFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment ThreadEdgeFields on ThreadEdge {\n  id\n  cursor\n  recipientRole\n  isArchived\n  remindAt\n  isStarred\n  isRead\n  isSeen\n  lastReadID\n  lastSeenID\n  subscription\n  aiSessionID\n  unreadMessageCounts {\n    ...UnreadCountFields\n    __typename\n  }\n  __typename\n}\n\nfragment UnreadCountFields on UnreadCounts {\n  mentioned\n  total\n  unseen\n  __typename\n}\n\nfragment ThreadSimpleFields on Thread {\n  ...ThreadCommonFields\n  __typename\n}\n\nfragment ThreadCommonFields on Thread {\n  id\n  subject\n  isPersistentChat\n  isSlack\n  replyToMessage {\n    ...MessageFields\n    __typename\n  }\n  firstMessage {\n    ...MessageFields\n    __typename\n  }\n  lastMessage {\n    ...MessageFields\n    __typename\n  }\n  messageableBy\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  recipientsAddable\n  workspaceID\n  createdAt\n  closedAt\n  closedBy {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment MessageFields on Message {\n  id\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  threadID\n  streamID\n  quotedMessage {\n    ...QuotedMessageFields\n    __typename\n  }\n  replyThreadID\n  ownReactions {\n    ...ReactionsFields\n    __typename\n  }\n  reactions {\n    edges {\n      node {\n        ...ReactionsFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  reactionCounts {\n    c\n    r\n    __typename\n  }\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}\n\nfragment QuotedMessageFields on QuotedMessage {\n  id\n  streamID\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment FileFields on File {\n  id\n  url\n  name\n  fileType\n  contentType\n  contentLength\n  metadata {\n    width\n    height\n    blurHash\n    __typename\n  }\n  previewable\n  __typename\n}\n\nfragment ExternalObjectFields on ExternalObject {\n  id\n  url\n  objectType\n  title\n  description\n  previewText\n  statusText\n  siteName\n  layout\n  icon {\n    url\n    __typename\n  }\n  statusIcon {\n    url\n    __typename\n  }\n  image {\n    url\n    blurHash\n    __typename\n  }\n  video {\n    url\n    contentType\n    __typename\n  }\n  audio {\n    url\n    contentType\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadPreviewFields on ThreadPreview {\n  id\n  name\n  subject\n  admin {\n    ...UserFields\n    __typename\n  }\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  __typename\n}\n\nfragment RecipientFields on Recipient {\n  ... on User {\n    ...UserFields\n    __typename\n  }\n  ... on GroupPreview {\n    ...GroupPreviewFields\n    __typename\n  }\n  ... on WorkspacePreview {\n    ...WorkspacePreviewFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupPreviewFields on GroupPreview {\n  id\n  name\n  description\n  workspaceID\n  joinableBy\n  memberCount\n  messageableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  admin {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment SlackChannelFields on SlackChannel {\n  id\n  teamID\n  __typename\n}\n\nfragment WorkspacePreviewFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ReactionsFields on Reaction {\n  id\n  type\n  user {\n    ...UserFields\n    __typename\n  }\n  __typename\n}","variables":{"limit":19,"mailbox":"starred","order":"unread"}},{"operationName":"PersistentChats","query":"query PersistentChats($chatType: ChatType = group, $last: Int, $before: String, $order: ThreadsOrder) {\n  persistentChats(\n    filter: {chatType: $chatType}\n    last: $last\n    before: $before\n    order: $order\n  ) {\n    totalCount\n    unreadCounts {\n      ...UnreadCountFields\n      __typename\n    }\n    pageInfo {\n      startCursor\n      endCursor\n      hasPreviousPage\n      hasNextPage\n      __typename\n    }\n    edges {\n      ...ThreadEdgeFields\n      node {\n        ...ThreadSimpleFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment UnreadCountFields on UnreadCounts {\n  mentioned\n  total\n  unseen\n  __typename\n}\n\nfragment ThreadEdgeFields on ThreadEdge {\n  id\n  cursor\n  recipientRole\n  isArchived\n  remindAt\n  isStarred\n  isRead\n  isSeen\n  lastReadID\n  lastSeenID\n  subscription\n  aiSessionID\n  unreadMessageCounts {\n    ...UnreadCountFields\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadSimpleFields on Thread {\n  ...ThreadCommonFields\n  __typename\n}\n\nfragment ThreadCommonFields on Thread {\n  id\n  subject\n  isPersistentChat\n  isSlack\n  replyToMessage {\n    ...MessageFields\n    __typename\n  }\n  firstMessage {\n    ...MessageFields\n    __typename\n  }\n  lastMessage {\n    ...MessageFields\n    __typename\n  }\n  messageableBy\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  recipientsAddable\n  workspaceID\n  createdAt\n  closedAt\n  closedBy {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment MessageFields on Message {\n  id\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  threadID\n  streamID\n  quotedMessage {\n    ...QuotedMessageFields\n    __typename\n  }\n  replyThreadID\n  ownReactions {\n    ...ReactionsFields\n    __typename\n  }\n  reactions {\n    edges {\n      node {\n        ...ReactionsFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  reactionCounts {\n    c\n    r\n    __typename\n  }\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}\n\nfragment QuotedMessageFields on QuotedMessage {\n  id\n  streamID\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment FileFields on File {\n  id\n  url\n  name\n  fileType\n  contentType\n  contentLength\n  metadata {\n    width\n    height\n    blurHash\n    __typename\n  }\n  previewable\n  __typename\n}\n\nfragment ExternalObjectFields on ExternalObject {\n  id\n  url\n  objectType\n  title\n  description\n  previewText\n  statusText\n  siteName\n  layout\n  icon {\n    url\n    __typename\n  }\n  statusIcon {\n    url\n    __typename\n  }\n  image {\n    url\n    blurHash\n    __typename\n  }\n  video {\n    url\n    contentType\n    __typename\n  }\n  audio {\n    url\n    contentType\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadPreviewFields on ThreadPreview {\n  id\n  name\n  subject\n  admin {\n    ...UserFields\n    __typename\n  }\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  __typename\n}\n\nfragment RecipientFields on Recipient {\n  ... on User {\n    ...UserFields\n    __typename\n  }\n  ... on GroupPreview {\n    ...GroupPreviewFields\n    __typename\n  }\n  ... on WorkspacePreview {\n    ...WorkspacePreviewFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupPreviewFields on GroupPreview {\n  id\n  name\n  description\n  workspaceID\n  joinableBy\n  memberCount\n  messageableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  admin {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment SlackChannelFields on SlackChannel {\n  id\n  teamID\n  __typename\n}\n\nfragment WorkspacePreviewFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ReactionsFields on Reaction {\n  id\n  type\n  user {\n    ...UserFields\n    __typename\n  }\n  __typename\n}","variables":{"chatType":"group","last":9,"order":"unread"}},{"operationName":"FetchUsers","query":"query FetchUsers($after: String, $filter: UsersFilter, $first: Int, $order: UsersOrder) {\n  users(after: $after, filter: $filter, first: $first, order: $order) {\n    edges {\n      ...UserEdgeFields\n      node {\n        ...UserFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      endCursor\n      hasNextPage\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment UserEdgeFields on UserEdge {\n  ...UserEdgeCommonFields\n  persistentChatEdge {\n    node {\n      ...ThreadSimpleFields\n      __typename\n    }\n    ...ThreadEdgeFields\n    __typename\n  }\n  unreadThreadCounts {\n    ...UnreadCountFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserEdgeCommonFields on UserEdge {\n  id\n  status\n  lastInteractionAt\n  __typename\n}\n\nfragment ThreadSimpleFields on Thread {\n  ...ThreadCommonFields\n  __typename\n}\n\nfragment ThreadCommonFields on Thread {\n  id\n  subject\n  isPersistentChat\n  isSlack\n  replyToMessage {\n    ...MessageFields\n    __typename\n  }\n  firstMessage {\n    ...MessageFields\n    __typename\n  }\n  lastMessage {\n    ...MessageFields\n    __typename\n  }\n  messageableBy\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  recipientsAddable\n  workspaceID\n  createdAt\n  closedAt\n  closedBy {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment MessageFields on Message {\n  id\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  threadID\n  streamID\n  quotedMessage {\n    ...QuotedMessageFields\n    __typename\n  }\n  replyThreadID\n  ownReactions {\n    ...ReactionsFields\n    __typename\n  }\n  reactions {\n    edges {\n      node {\n        ...ReactionsFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  reactionCounts {\n    c\n    r\n    __typename\n  }\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}\n\nfragment QuotedMessageFields on QuotedMessage {\n  id\n  streamID\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment FileFields on File {\n  id\n  url\n  name\n  fileType\n  contentType\n  contentLength\n  metadata {\n    width\n    height\n    blurHash\n    __typename\n  }\n  previewable\n  __typename\n}\n\nfragment ExternalObject[90mOct  6 19:52:14.605640[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mNotificationCounts [36mrequest_id=[0m19afee9d [36mvariables=[0m{}
bufferedLog 0 false
[90mOct  6 19:52:14.606398[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:167[0m[36m >[0m [sql]: SELECT "group_id" FROM "group_members" WHERE (role = $3 AND user_id = $4) AND "group_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.00025 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:167","/app/pkg/graphql/objects/joinapprovalconnection.go:22","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.605741[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mPersistentChats [36mrequest_id=[0m19afee9d [36mvariables=[0m{"chatType":"group","last":9,"order":"unread"}
bufferedLog 0 false
[90mOct  6 19:52:14.606740[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:167[0m[36m >[0m [sql]: SELECT "thread_id" FROM "thread_recipients" WHERE (role = $5 AND recipient_user_id = $6) AND "thread_recipients"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:167","/app/pkg/graphql/objects/joinapprovalconnection.go:22","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.606953[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:167[0m[36m >[0m [sql]: SELECT "workspace_id" FROM "workspace_members" WHERE (role = $7 AND user_id = $8) AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_members [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:167","/app/pkg/graphql/objects/joinapprovalconnection.go:22","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.605766[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mWorkspaceSubscriptionQuery [36mrequest_id=[0m19afee9d [36mvariables=[0m{"workspaceID":"wks_31YmbjjiTs9HWaYD7726C4zXLOJ"}
bufferedLog 0 false
[90mOct  6 19:52:14.607101[0m [34mTRC[0m [1mpkg/repository/user/repository.go:108[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id = $1 AND "users"."deleted_at" IS NULL LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m20.379694 [36mlocation=[0m["/app/pkg/repository/user/repository.go:108","/app/pkg/operations/user/userutils/userutils.go:28","/app/pkg/operations/auth/auth.go:133"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m1a3503296fc87df0 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.607489[0m DBG [1mpkg/handlers/graphql.go:234[0m[36m >[0m Processing GraphQL [36mOperations=[0m[{"operationName":"FetchGroupOrPreviewEdge","query":"query FetchGroupOrPreviewEdge($id: ID!, $groupsFilter: GroupsFilter, $groupsOrder: GroupsOrder = name, $groupsLimit: Int = 100, $groupsAfter: String, $membersLimit: Int = 100, $membersAfter: String, $membersFilter: MembersFilter, $pendingApprovalsLimit: Int = 100, $pendingApprovalsAfter: String) {\n  node(id: $id) {\n    id\n    ... on GroupEdge {\n      ...GroupEdgeFields\n      node {\n        ...GroupFields\n        __typename\n      }\n      __typename\n    }\n    ... on GroupPreviewEdge {\n      ...GroupPreviewEdgeFields\n      node {\n        ...GroupPreviewFields\n        __typename\n      }\n      __typename\n    }\n    ... on WorkspaceEdge {\n      ...WorkspaceEdgeFields\n      node {\n        ...WorkspaceFields\n        __typename\n      }\n      __typename\n    }\n    ... on WorkspacePreviewEdge {\n      ...WorkspacePreviewEdgeFields\n      node {\n        ...WorkspacePreviewFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment GroupEdgeFields on GroupEdge {\n  ...GroupEdgeCommonFields\n  persistentChatEdge {\n    node {\n      ...ThreadSimpleFields\n      __typename\n    }\n    ...ThreadEdgeFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupEdgeCommonFields on GroupEdge {\n  id\n  cursor\n  memberRole\n  lastInteractionAt\n  threadSubscription\n  __typename\n}\n\nfragment ThreadSimpleFields on Thread {\n  ...ThreadCommonFields\n  __typename\n}\n\nfragment ThreadCommonFields on Thread {\n  id\n  subject\n  isPersistentChat\n  isSlack\n  replyToMessage {\n    ...MessageFields\n    __typename\n  }\n  firstMessage {\n    ...MessageFields\n    __typename\n  }\n  lastMessage {\n    ...MessageFields\n    __typename\n  }\n  messageableBy\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  recipientsAddable\n  workspaceID\n  createdAt\n  closedAt\n  closedBy {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment MessageFields on Message {\n  id\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  threadID\n  streamID\n  quotedMessage {\n    ...QuotedMessageFields\n    __typename\n  }\n  replyThreadID\n  ownReactions {\n    ...ReactionsFields\n    __typename\n  }\n  reactions {\n    edges {\n      node {\n        ...ReactionsFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  reactionCounts {\n    c\n    r\n    __typename\n  }\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment UserFields on User {\n  ...UserCommonFields\n  workspaceProfiles {\n    ...WorkspaceProfileFields\n    __typename\n  }\n  __typename\n}\n\nfragment UserCommonFields on User {\n  id\n  addressDomains\n  avatarURL\n  bio\n  isRegistered\n  name\n  workspaceIDs\n  __typename\n}\n\nfragment WorkspaceProfileFields on WorkspaceProfile {\n  id\n  workspace {\n    ... on WorkspacePreview {\n      ...WorkspacePreviewSimpleFields\n      __typename\n    }\n    __typename\n  }\n  slackUser {\n    ...SlackUserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewSimpleFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  __typename\n}\n\nfragment WorkspacePreviewCommonFields on WorkspacePreview {\n  id\n  name\n  domains\n  avatarURL\n  joinableBy\n  memberCount\n  __typename\n}\n\nfragment SlackUserFields on SlackUser {\n  id\n  profileURL\n  teamID\n  __typename\n}\n\nfragment QuotedMessageFields on QuotedMessage {\n  id\n  streamID\n  user {\n    ...UserFields\n    __typename\n  }\n  text\n  textPreview\n  attachments {\n    ... on File {\n      ...FileFields\n      __typename\n    }\n    ... on ExternalObject {\n      ...ExternalObjectFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    __typename\n  }\n  createdAt\n  updatedAt\n  __typename\n}\n\nfragment FileFields on File {\n  id\n  url\n  name\n  fileType\n  contentType\n  contentLength\n  metadata {\n    width\n    height\n    blurHash\n    __typename\n  }\n  previewable\n  __typename\n}\n\nfragment ExternalObjectFields on ExternalObject {\n  id\n  url\n  objectType\n  title\n  description\n  previewText\n  statusText\n  siteName\n  layout\n  icon {\n    url\n    __typename\n  }\n  statusIcon {\n    url\n    __typename\n  }\n  image {\n    url\n    blurHash\n    __typename\n  }\n  video {\n    url\n    contentType\n    __typename\n  }\n  audio {\n    url\n    contentType\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadPreviewFields on ThreadPreview {\n  id\n  name\n  subject\n  admin {\n    ...UserFields\n    __typename\n  }\n  recipients {\n    edges {\n      node {\n        ...RecipientFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    totalCount\n    __typename\n  }\n  __typename\n}\n\nfragment RecipientFields on Recipient {\n  ... on User {\n    ...UserFields\n    __typename\n  }\n  ... on GroupPreview {\n    ...GroupPreviewFields\n    __typename\n  }\n  ... on WorkspacePreview {\n    ...WorkspacePreviewFields\n    __typename\n  }\n  __typename\n}\n\nfragment GroupPreviewFields on GroupPreview {\n  id\n  name\n  description\n  workspaceID\n  joinableBy\n  memberCount\n  messageableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  admin {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment SlackChannelFields on SlackChannel {\n  id\n  teamID\n  __typename\n}\n\nfragment WorkspacePreviewFields on WorkspacePreview {\n  ...WorkspacePreviewCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ReactionsFields on Reaction {\n  id\n  type\n  user {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment ThreadEdgeFields on ThreadEdge {\n  id\n  cursor\n  recipientRole\n  isArchived\n  remindAt\n  isStarred\n  isRead\n  isSeen\n  lastReadID\n  lastSeenID\n  subscription\n  aiSessionID\n  unreadMessageCounts {\n    ...UnreadCountFields\n    __typename\n  }\n  __typename\n}\n\nfragment UnreadCountFields on UnreadCounts {\n  mentioned\n  total\n  unseen\n  __typename\n}\n\nfragment GroupFields on Group {\n  ...GroupCommonFields\n  members(first: $membersLimit, after: $membersAfter, filter: $membersFilter) {\n    totalCount\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    edges {\n      cursor\n      memberRole\n      node {\n        ...UserFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  pendingApprovals(\n    first: $pendingApprovalsLimit\n    after: $pendingApprovalsAfter\n    filter: $membersFilter\n  ) {\n    totalCount\n    edges {\n      node {\n        ...JoinApprovalSimpleFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    __typename\n  }\n  apps {\n    edges {\n      ...WorkspaceAppEdgeFields\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment GroupCommonFields on Group {\n  id\n  admin {\n    ...UserFields\n    __typename\n  }\n  avatarURL\n  name\n  description\n  workspaceID\n  memberCount\n  messageableBy\n  chatMessageableBy\n  joinableBy\n  commonWorkspaceIDs\n  sharingWorkspaceIDs\n  archivedAt\n  archivedBy {\n    ...UserFields\n    __typename\n  }\n  slackChannel {\n    ...SlackChannelFields\n    __typename\n  }\n  __typename\n}\n\nfragment JoinApprovalSimpleFields on JoinApproval {\n  ...JoinApprovalCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  joining {\n    ...RecipientFields\n    __typename\n  }\n  requester {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment JoinApprovalCommonFields on JoinApproval {\n  id\n  adminApprovedAt\n  joiningApprovedAt\n  requestedAt\n  __typename\n}\n\nfragment WorkspaceAppEdgeFields on WorkspaceAppEdge {\n  id\n  node {\n    ...AppFields\n    __typename\n  }\n  webhooks {\n    ...WebhookFields\n    __typename\n  }\n  creator {\n    ...UserFields\n    __typename\n  }\n  appUser {\n    ...UserFields\n    __typename\n  }\n  workspaceID\n  __typename\n}\n\nfragment AppFields on App {\n  id\n  name\n  avatarURL\n  configureGroup\n  configureGroupPath\n  configureThread\n  configureThreadPath\n  configureWorkspace\n  configureWorkspacePath\n  appSettingsPath\n  description\n  docsURL\n  homeURL\n  instructions\n  publishedAt\n  threadActions {\n    description\n    label\n    name\n    path\n    __typename\n  }\n  workspaceID\n  appType\n  __typename\n}\n\nfragment WebhookFields on WorkspaceAppWebhook {\n  id\n  url\n  __typename\n}\n\nfragment GroupPreviewEdgeFields on GroupPreviewEdge {\n  id\n  cursor\n  joinApproval {\n    ...JoinApprovalFields\n    __typename\n  }\n  __typename\n}\n\nfragment JoinApprovalFields on JoinApproval {\n  ...JoinApprovalCommonFields\n  admin {\n    ...UserFields\n    __typename\n  }\n  joining {\n    ...RecipientFields\n    __typename\n  }\n  joinable {\n    ... on GroupPreview {\n      ...GroupPreviewFields\n      __typename\n    }\n    ... on ThreadPreview {\n      ...ThreadPreviewFields\n      __typename\n    }\n    ... on WorkspacePreview {\n      ...WorkspacePreviewFields\n      __typename\n    }\n    __typename\n  }\n  requester {\n    ...UserFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspaceEdgeFields on WorkspaceEdge {\n  ...WorkspaceEdgeCommonFields\n  persistentChatEdge {\n    node {\n      ...ThreadSimpleFields\n      __typename\n    }\n    ...ThreadEdgeFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspaceEdgeCommonFields on WorkspaceEdge {\n  id\n  cursor\n  memberRole\n  __typename\n}\n\nfragment WorkspaceFields on Workspace {\n  ...WorkspaceCommonSettingsFields\n  groups(\n    first: $groupsLimit\n    after: $groupsAfter\n    order: $groupsOrder\n    filter: $groupsFilter\n  ) {\n    totalCount\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    edges {\n      ...GroupOrPreviewEdgeFields\n      node {\n        ...GroupFields\n        ...GroupPreviewFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspaceCommonSettingsFields on Workspace {\n  ...WorkspaceCommonFields\n  apps {\n    edges {\n      ...WorkspaceAppEdgeFields\n      __typename\n    }\n    __typename\n  }\n  members(first: $membersLimit, after: $membersAfter, filter: $membersFilter) {\n    totalCount\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    edges {\n      cursor\n      memberRole\n      pending\n      node {\n        ...UserFields\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  pendingApprovals(\n    first: $pendingApprovalsLimit\n    after: $pendingApprovalsAfter\n    filter: $membersFilter\n  ) {\n    totalCount\n    edges {\n      cursor\n      node {\n        ...JoinApprovalSimpleFields\n        __typename\n      }\n      __typename\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspaceCommonFields on Workspace {\n  id\n  admin {\n    ...UserFields\n    __typename\n  }\n  name\n  domains\n  avatarURL\n  memberCount\n  messageableBy\n  chatMessageableBy\n  joinableBy\n  subscriptionPeriodEnd\n  subscriptionStatus\n  __typename\n}\n\nfragment GroupOrPreviewEdgeFields on GroupOrPreviewEdge {\n  id\n  cursor\n  joinApproval {\n    ...JoinApprovalFields\n    __typename\n  }\n  __typename\n}\n\nfragment WorkspacePreviewEdgeFields on WorkspacePreviewEdge {\n  id\n  cursor\n  joinApproval {\n    ...JoinApprovalFields\n    __typename\n  }\n  __typename\n}","variables":{"groupsLimit":100,"groupsOrder":"name","id":"grp_33FOc5T3bp4aMWBdL4JiWpdDahF-usr_31YmaYRfy5BcxS1alwOAkDSmbtD","membersLimit":100,"pendingApprovalsLimit":100}}] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.607593[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT "group_id" FROM "group_members" WHERE (role = $3 AND user_id = $4) AND "group_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.601077[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mThreadList [36mrequest_id=[0m19afee9d [36mvariables=[0m{"excludeChats":true,"excludeStarred":true,"limit":19,"mailbox":"inbox","order":"lastMessage"}
bufferedLog 0 false
[90mOct  6 19:52:14.608001[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mFetchGroupOrPreviewEdge [36mrequest_id=[0m760ff060 [36mvariables=[0m{"groupsLimit":100,"groupsOrder":"name","id":"grp_33FOc5T3bp4aMWBdL4JiWpdDahF-usr_31YmaYRfy5BcxS1alwOAkDSmbtD","membersLimit":100,"pendingApprovalsLimit":100}
bufferedLog 0 false
[90mOct  6 19:52:14.607742[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/graphql/objects/threadconnection.go:147","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.608280[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT tra.*,CONCAT((unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, ''))::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/graphql/objects/threadconnection.go:147","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.608226[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT "thread_id" FROM "thread_recipients" WHERE (role = $5 AND recipient_user_id = $6) AND "thread_recipients"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.608703[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.608810[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.608825[0m [34mTRC[0m [1mpkg/repository/user/repository.go:108[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id = $1 AND "users"."deleted_at" IS NULL LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m23.042634 [36mlocation=[0m["/app/pkg/repository/user/repository.go:108","/app/pkg/operations/user/userutils/userutils.go:28","/app/pkg/operations/auth/auth.go:133"] [36mrequest_id=[0m811bcc0e [36mspan_id=[0mfc13d79675a3abef [36mtrace_id=[0m9377dca014a32016b13d0df8bc2facef
bufferedLog 0 false
[90mOct  6 19:52:14.608964[0m DBG [1mpkg/handlers/graphql.go:234[0m[36m >[0m Processing GraphQL [36mOperations=[0m[{"operationName":"DeviceHeartbeat","query":"mutation DeviceHeartbeat($id: ID!, $input: DeviceHeartbeatInput!) {\n  deviceHeartbeat(id: $id, input: $input)\n}","variables":{"id":"dev_33R5RI19uGaorvTdFHQQLn7SbwJ","input":{"presence":"active"}}}] [36mrequest_id=[0m811bcc0e
bufferedLog 0 false
[90mOct  6 19:52:14.608974[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE persistent_for_recipients IS NULL AND COALESCE(last_seen_id, '') < COALESCE(last_message_id, '') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.609032[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mDeviceHeartbeat [36mrequest_id=[0m811bcc0e [36mvariables=[0m{"id":"dev_33R5RI19uGaorvTdFHQQLn7SbwJ","input":{"presence":"active"}}
bufferedLog 0 false
[90mOct  6 19:52:14.609087[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $3 AS id, count(*) as count FROM "tru_cte" WHERE (archived_at IS NULL AND subscription = 'inbox') AND COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.608616[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT "workspace_id" FROM "workspace_members" WHERE (role = $7 AND user_id = $8) AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_members [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.609189[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $4 AS id, count(*) as count FROM "tru_cte" WHERE (archived_at IS NULL AND subscription = 'inbox') AND (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.609425[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $5 AS id, count(*) as count FROM "tru_cte" WHERE archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.610678[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: SELECT other_id user_id FROM "user_edges" WHERE user_id = $1 AND status IN ('connected', 'starred') AND "user_edges"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0muser_edges [36mduration=[0m0.000167 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.610892[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/operations/thread/thread.go:877","/app/pkg/graphql/objects/threadconnection.go:46"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611118[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT count(*) FROM "join_approvals" WHERE ((joining_approved_at IS NULL AND joining_user_id = $1) OR (admin_approved_at IS NULL AND (admin_id = $2 OR joinable_group_id IN (SELECT "group_id" FROM "group_members" WHERE (role = $3 AND user_id = $4) AND "group_members"."deleted_at" IS NULL) OR joinable_thread_id IN (SELECT "thread_id" FROM "thread_recipients" WHERE (role = $5 AND recipient_user_id = $6) AND "thread_recipients"."deleted_at" IS NULL) OR joinable_workspace_id IN (SELECT "workspace_id" FROM "workspace_members" WHERE (role = $7 AND user_id = $8) AND "workspace_members"."deleted_at" IS NULL)))) AND "join_approvals"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mjoin_approvals [36mduration=[0m7.108535 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mc1d52e9f7c6fcfa8 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.611120[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: SELECT "group_id" FROM "group_members" WHERE user_id = $2 AND "group_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611207[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT tra.*,CONCAT((unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, ''))::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND starred_at IS NOT NULL AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.00075 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/operations/thread/thread.go:877","/app/pkg/graphql/objects/threadconnection.go:46"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611375[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: SELECT "user_id" FROM "group_members" WHERE group_id IN (SELECT "group_id" FROM "group_members" WHERE user_id = $2 AND "group_members"."deleted_at" IS NULL) AND "group_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000167 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611674[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: SELECT "workspace_id" FROM "workspace_members" WHERE user_id = $3 AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_members [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611781[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: SELECT "user_id" FROM "workspace_members" WHERE workspace_id IN (SELECT "workspace_id" FROM "workspace_members" WHERE user_id = $3 AND "workspace_members"."deleted_at" IS NULL) AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_members [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611900[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: SELECT users.id,users.created_at,users.updated_at,users.deleted_at,users.first_name,users.last_name,users.avatar_url,users.bio,users.addresses,users.workspace_app_id,users.workspace_ids,users.stream_synced_at,users.authenticated_at FROM "users" WHERE users.id IN (select user_id from "connectedUsers" union all select user_id from "mutualGroups" union all select user_id from "mutualWorkspaces") AND "users"."deleted_at" IS NULL GROUP BY "users"."id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0musers [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611903[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:167[0m[36m >[0m [sql]: SELECT * FROM "join_approvals" WHERE ((joining_approved_at IS NULL AND joining_user_id = $1) OR (admin_approved_at IS NULL AND (admin_id = $2 OR joinable_group_id IN (SELECT "group_id" FROM "group_members" WHERE (role = $3 AND user_id = $4) AND "group_members"."deleted_at" IS NULL) OR joinable_thread_id IN (SELECT "thread_id" FROM "thread_recipients" WHERE (role = $5 AND recipient_user_id = $6) AND "thread_recipients"."deleted_at" IS NULL) OR joinable_workspace_id IN (SELECT "workspace_id" FROM "workspace_members" WHERE (role = $7 AND user_id = $8) AND "workspace_members"."deleted_at" IS NULL)))) AND "join_approvals"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mjoin_approvals [36mduration=[0m7.536407 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:167","/app/pkg/graphql/objects/joinapprovalconnection.go:22","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m49db3421f817bbda [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.612247[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:176[0m[36m >[0m [sql]: SELECT count(*) FROM "join_approvals" WHERE ((joining_approved_at IS NULL AND joining_user_id = $1) OR (admin_approved_at IS NULL AND (admin_id = $2 OR joinable_group_id IN (SELECT "group_id" FROM "group_members" WHERE (role = $3 AND user_id = $4) AND "group_members"."deleted_at" IS NULL) OR joinable_thread_id IN (SELECT "thread_id" FROM "thread_recipients" WHERE (role = $5 AND recipient_user_id = $6) AND "thread_recipients"."deleted_at" IS NULL) OR joinable_workspace_id IN (SELECT "workspace_id" FROM "workspace_members" WHERE (role = $7 AND user_id = $8) AND "workspace_members"."deleted_at" IS NULL)))) AND "join_approvals"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mjoin_approvals [36mduration=[0m4.948175 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:176","/app/pkg/graphql/objects/joinapprovalconnection.go:32","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mc7fe3ff2657895c7 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.612714[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mFetchJoinApprovals [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.613054[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.613453[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.613703[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.611903[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.612058[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: SELECT * FROM "user_edges" WHERE user_id = $4 AND "user_edges"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0muser_edges [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.612796[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.612152[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.613299[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/graphql/objects/threadconnection.go:147","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.614152[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT tra.*,CONCAT((unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, ''))::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/graphql/objects/threadconnection.go:147","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.614573[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.615727[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000375 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.615865[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE starred_at IS NOT NULL AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.615948[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $3 AS id, count(*) as count FROM "tru_cte" WHERE archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.615271[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/operations/thread/thread.go:877","/app/pkg/graphql/objects/threadconnection.go:46"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.616577[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT tra.*,CONCAT((archived_at IS NULL AND remind_at IS NOT NULL AND remind_at < '2025-10-06 19:52:14')::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND persistent_for_recipients IS NULL AND starred_at IS NULL AND (archived_at IS NULL AND subscription = 'inbox') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/operations/thread/thread.go:877","/app/pkg/graphql/objects/threadconnection.go:46"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.617970[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000166 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.618058[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.618164[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.618847[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.618954[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.619047[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.619370[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.619445[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.619555[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE persistent_for_recipients IS NULL AND starred_at IS NULL AND (archived_at IS NULL AND subscription = 'inbox') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtru_cte [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.619838[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspaces [36mduration=[0m12.506998 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/graphql/resolvers/workspacesubscriptions/queries.go:32","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d [36mspan_id=[0me4c888487e63ba96 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.620528[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT * FROM (SELECT tra.*,CONCAT((unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, ''))::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) AS mailbox WHERE "mailbox"."deleted_at" IS NULL ORDER BY "cursor" DESC LIMIT 10 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mmailbox [36mduration=[0m13.022202 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/graphql/objects/threadconnection.go:147","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m64d3f32f50b91242 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.620868[0m [34mTRC[0m [1mpkg/repository/user/repository.go:364[0m[36m >[0m [sql]: WITH "connectedUsers" AS (SELECT other_id user_id FROM "user_edges" WHERE user_id = $1 AND status IN ('connected', 'starred') AND "user_edges"."deleted_at" IS NULL),"mutualGroups" AS (SELECT "user_id" FROM "group_members" WHERE group_id IN (SELECT "group_id" FROM "group_members" WHERE user_id = $2 AND "group_members"."deleted_at" IS NULL) AND "group_members"."deleted_at" IS NULL),"mutualWorkspaces" AS (SELECT "user_id" FROM "workspace_members" WHERE workspace_id IN (SELECT "workspace_id" FROM "workspace_members" WHERE user_id = $3 AND "workspace_members"."deleted_at" IS NULL) AND "workspace_members"."deleted_at" IS NULL),"users" AS (SELECT users.id,users.created_at,users.updated_at,users.deleted_at,users.first_name,users.last_name,users.avatar_url,users.bio,users.addresses,users.workspace_app_id,users.workspace_ids,users.stream_synced_at,users.authenticated_at FROM "users" WHERE users.id IN (select user_id from "connectedUsers" union all select user_id from "mutualGroups" union all select user_id from "mutualWorkspaces") AND "users"."deleted_at" IS NULL GROUP BY "users"."id"),"userEdges" AS (SELECT * FROM "user_edges" WHERE user_id = $4 AND "user_edges"."deleted_at" IS NULL) SELECT "users".* FROM "users" LEFT JOIN "userEdges" ue ON ue.other_id = users.id WHERE users.id != $5 AND COALESCE(ue.status, 'none') NOT IN ('hidden', 'blocked') AND users.workspace_app_id IS NULL AND "users"."deleted_at" IS NULL GROUP BY users.id, users.created_at, users.updated_at, users.deleted_at, users.first_name, users.last_name, users.avatar_url, users.bio, users.addresses, users.workspace_app_id, users.workspace_ids, users.stream_synced_at, users.authenticated_at ORDER BY COALESCE(max(ue.last_interaction_at), case when max(ue.status) IN ('connected', 'starred') then max(ue.created_at) else null end) is not null desc,COALESCE(max(ue.last_interaction_at), case when max(ue.status) IN ('connected', 'starred') then max(ue.created_at) else null end) desc nulls last,case when users.avatar_url is not null then 0 else 1 end,case when users.first_name is not null then 0 else 1 end,"users"."id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m6 [36mdb.table=[0musers [36mduration=[0m10.446512 [36mlocation=[0m["/app/pkg/repository/user/repository.go:364","/app/pkg/graphql/resolvers/users/queries.go:81","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m661ac733fad86e3a [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.620768[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: WITH "tru_cte" AS (SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1) SELECT tr.* FROM ((SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])))) AS tr [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mtr [36mduration=[0m8.968355 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m8177ce3b04df9a50 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.621216[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:248[0m[36m >[0m [sql]: SELECT count(*) FROM "workspace_members" WHERE "workspace_members"."workspace_id" = $1 AND "workspace_members"."user_id" = $2 AND "workspace_members"."role" = $3 AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_members [36mduration=[0m1.306242 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:248","/app/pkg/workspacesubscription/workspacesubscription.go:44","/app/pkg/graphql/resolvers/workspacesubscriptions/queries.go:39"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m739432cb1640f6e3 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.621480[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:175[0m[36m >[0m [sql]: SELECT * FROM "threads" WHERE id IN ($1) AND "threads"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthreads [36mduration=[0m0.904494 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:175","/app/pkg/graphql/objects/threadconnection.go:174","/app/pkg/graphql/objects/threadconnection.go:151"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mc7d1fdc190843edf [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.621313[0m [34mTRC[0m [1mpkg/repository/user/repository.go:404[0m[36m >[0m [sql]: SELECT * FROM "user_edges" WHERE user_id = $1 AND "user_edges"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0muser_edges [36mduration=[0m0.265915 [36mlocation=[0m["/app/pkg/repository/user/repository.go:404","/app/pkg/graphql/objects/userconnection.go:20","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m34efccb5c02300a2 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.621816[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT * FROM (SELECT tra.*,CONCAT((unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, ''))::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND starred_at IS NOT NULL AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) AS mailbox WHERE "mailbox"."deleted_at" IS NULL ORDER BY "cursor" DESC LIMIT 20 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mmailbox [36mduration=[0m11.237007 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/operations/thread/thread.go:877","/app/pkg/graphql/objects/threadconnection.go:46"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m9ef6e831f5b262d6 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.622347[0m [34mTRC[0m [1mpkg/repository/customemoji/repository.go:110[0m[36m >[0m [sql]: SELECT "custom_emojis"."id","custom_emojis"."created_at","custom_emojis"."updated_at","custom_emojis"."deleted_at","custom_emojis"."workspace_id","custom_emojis"."created_by","custom_emojis"."name","custom_emojis"."file_id" FROM "custom_emojis" JOIN workspace_members ON workspace_members.workspace_id = custom_emojis.workspace_id WHERE (workspace_members.deleted_at IS NULL AND workspace_members.user_id = $1) AND "custom_emojis"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 301 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mcustom_emojis [36mduration=[0m15.684976 [36mlocation=[0m["/app/pkg/repository/customemoji/repository.go:110","/app/pkg/graphql/objects/customemojiconnection.go:31","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m1a06bdbe02eaa0f0 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.622420[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mCustomEmojis [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.622972[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:175[0m[36m >[0m [sql]: SELECT * FROM "threads" WHERE id IN ($1) AND "threads"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthreads [36mduration=[0m1.037618 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:175","/app/pkg/graphql/objects/threadconnection.go:174","/app/pkg/graphql/objects/threadconnection.go:62"] [36mrequest_id=[0m19afee9d [36mspan_id=[0md480544b4f9eaaf1 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.623435[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:59[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE workspace_id = $1 AND "workspace_subscriptions"."deleted_at" IS NULL ORDER BY stripe_subscription_status desc nulls last, stripe_subscription->'current_period_end' desc,"workspace_subscriptions"."id" LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m2.165902 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:59","/app/pkg/workspacesubscription/workspacesubscription.go:91","/app/pkg/graphql/resolvers/workspacesubscriptions/queries.go:44"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mc86bcdaae01c538f [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.626158[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1,$2,$3,$4,$5,$6) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
nt FROM "tru_cte" WHERE (archived_at IS NULL AND subscription = 'inbox') AND COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) UNION ALL (SELECT $4 AS id, count(*) as count FROM "tru_cte" WHERE (archived_at IS NULL AND subscription = 'inbox') AND (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) UNION ALL (SELECT $5 AS id, count(*) as count FROM "tru_cte" WHERE archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])))) AS tr [36mdb.operation=[0mselect [36mdb.rows=[0m4 [36mdb.table=[0mtr [36mduration=[0m17.80317 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mb633d7b06d3245ec [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.627633[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mPersistentChats [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.627663[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mMailboxCounts [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.626634[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($7,$8,$9,$10,$11,$12) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.627437[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: WITH "tru_cte" AS (SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1) SELECT tr.* FROM ((SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE 'usr_%' AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])))) AS tr [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mtr [36mduration=[0m15.43877 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mb0a5b90f44175a32 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.626148[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: WITH "tru_cte" AS (SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1) SELECT tr.* FROM ((SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE persistent_for_recipients IS NULL AND COALESCE(last_seen_id, '') < COALESCE(last_message_id, '') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) UNION ALL (SELECT $3 AS id, count(*) as cou[90mOct  6 19:52:14.628989[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:175[0m[36m >[0m [sql]: SELECT * FROM "threads" WHERE id IN ($1,$2,$3,$4,$5) AND "threads"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m5 [36mdb.table=[0mthreads [36mduration=[0m0.234582 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:175","/app/pkg/graphql/objects/threadconnection.go:174","/app/pkg/graphql/objects/threadconnection.go:151"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m05cc51d6e921bc7a [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.628692[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:823[0m[36m >[0m [sql]: SELECT * FROM "threads" WHERE persistent_for_recipients IN ($1,$2,$3,$4,$5,$6) AND "threads"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthreads [36mduration=[0m1.849488 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:823","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0ma85f1c0bf23b2e04 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.628689[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT * FROM (SELECT tra.*,CONCAT((unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, ''))::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) AS mailbox WHERE "mailbox"."deleted_at" IS NULL ORDER BY "cursor" DESC LIMIT 10 [36mdb.operation=[0mselect [36mdb.rows=[0m5 [36mdb.table=[0mmailbox [36mduration=[0m15.632518 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/graphql/objects/threadconnection.go:147","/app/pkg/utils/future.go:38"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m3ff7505a44d9fc36 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.628845[0m [34mTRC[0m [1mpkg/repository/user/repository.go:755[0m[36m >[0m [sql]: (SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1,$2,$3,$4,$5,$6) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL) UNION ALL (SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($7,$8,$9,$10,$11,$12) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL)) ORDER BY user_id, workspace_id [36mdb.operation=[0mselect [36mdb.rows=[0m6 [36mdb.table=[0mworkspace_profile_results [36mduration=[0m2.172486 [36mlocation=[0m["/app/pkg/repository/user/repository.go:755","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m34fa364c0c83b0b0 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.632450[0m [34mTRC[0m [1mpkg/repository/group/repository.go:163[0m[36m >[0m [sql]: SELECT * FROM "groups" WHERE id = $1 AND "groups"."deleted_at" IS NULL LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mgroups [36mduration=[0m16.578678 [36mlocation=[0m["/app/pkg/repository/group/repository.go:163","/app/pkg/graphql/resolvers/nodes/group.go:19","/app/pkg/graphql/resolvers/nodes/nodes.go:48"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m9d4fd290d6faac8f [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.632803[0m [34mTRC[0m [1mpkg/repository/group/repository.go:263[0m[36m >[0m [sql]: SELECT * FROM "group_members" WHERE (group_id = $1 AND user_id = $2) AND "group_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mgroup_members [36mduration=[0m0.27679 [36mlocation=[0m["/app/pkg/repository/group/repository.go:263","/app/pkg/graphql/resolvers/nodes/group.go:25","/app/pkg/graphql/resolvers/nodes/nodes.go:48"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m423e755f262117cc [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.633521[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:781[0m[36m >[0m [sql]: SELECT id AS id, members_count AS count FROM "workspaces" WHERE id IN ($1) AND "workspaces"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspaces [36mduration=[0m0.31004 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:781","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mdfd6cdec275625c5 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.633646[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:153[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id IN ($1) AND "workspaces"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspaces [36mduration=[0m0.353581 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:153","/app/pkg/repository/workspace/repository.go:742","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m27ab38ed2747a6b8 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.633711[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: WITH "tru_cte" AS (SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1) SELECT tr.* FROM ((SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE starred_at IS NOT NULL AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) UNION ALL (SELECT $3 AS id, count(*) as count FROM "tru_cte" WHERE archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])))) AS tr [36mdb.operation=[0mselect [36mdb.rows=[0m2 [36mdb.table=[0mtr [36mduration=[0m19.223993 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m5cf1e2323ae5815c [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.633813[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mThreadList [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.634476[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mFetchUsers [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.634543[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:333[0m[36m >[0m [sql]: SELECT * FROM (SELECT tra.*,CONCAT((archived_at IS NULL AND remind_at IS NOT NULL AND remind_at < '2025-10-06 19:52:14')::int::text, '-', COALESCE(last_message_id, thread_id)) AS cursor FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = tra.thread_id WHERE user_id = $1 AND persistent_for_recipients IS NULL AND starred_at IS NULL AND (archived_at IS NULL AND subscription = 'inbox') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox]))) AS mailbox WHERE "mailbox"."deleted_at" IS NULL ORDER BY "cursor" DESC LIMIT 20 [36mdb.operation=[0mselect [36mdb.rows=[0m13 [36mdb.table=[0mmailbox [36mduration=[0m19.388868 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:333","/app/pkg/operations/thread/thread.go:877","/app/pkg/graphql/objects/threadconnection.go:46"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m8aa323fce672a4a8 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.634607[0m [34mTRC[0m [1mpkg/repository/glueai/repository.go:251[0m[36m >[0m [sql]: SELECT * FROM "glueai_sessions" WHERE (user_id = $1 AND context_thread_id IN ($2,$3,$4) AND deleted_at IS NULL) AND "glueai_sessions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mglueai_sessions [36mduration=[0m0.609829 [36mlocation=[0m["/app/pkg/repository/glueai/repository.go:251","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m918487c1c59b0451 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.634683[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: WITH "tru_cte" AS (SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1) SELECT tr.* FROM ((SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])))) AS tr [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mtr [36mduration=[0m17.450255 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:660","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m7623bb522b83f6fd [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.633985[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.634240[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.634940[0m [34mTRC[0m [1mpkg/repository/group/repository.go:172[0m[36m >[0m [sql]: SELECT * FROM "groups" WHERE id IN ($1,$2,$3) AND "groups"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m3 [36mdb.table=[0mgroups [36mduration=[0m0.984494 [36mlocation=[0m["/app/pkg/repository/group/repository.go:172","/app/pkg/repository/group/repository.go:689","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m6bd86db56a2c2af8 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.635147[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:175[0m[36m >[0m [sql]: SELECT * FROM "threads" WHERE id IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13) AND "threads"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m13 [36mdb.table=[0mthreads [36mduration=[0m0.54558 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:175","/app/pkg/graphql/objects/threadconnection.go:174","/app/pkg/graphql/objects/threadconnection.go:62"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m2bc67c7b53dba396 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.635375[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: WITH "tru_cte" AS (SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1) SELECT tr.* FROM ((SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') AND archived_at IS NULL AND persistent_for_recipients[1]::text LIKE ANY('{grp_%,wks_%}') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])))) AS tr [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mtr [36mduration=[0m16.657053 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:664","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mef0f09349375ac93 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.635928[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:839[0m[36m >[0m [sql]: SELECT * FROM "slack_thread_metadata" WHERE thread_id IN ($1,$2,$3) AND "slack_thread_metadata"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mslack_thread_metadata [36mduration=[0m1.768321 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:839","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m9f2f8a21c213f282 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.636224[0m [34mTRC[0m [1mpkg/repository/device/repository.go:169[0m[36m >[0m [sql]: UPDATE "devices" SET "last_presence"=$1,"last_presence_at"=$2,"updated_at"=$3 WHERE user_id = $4 AND "devices"."deleted_at" IS NULL AND "id" = $5 [36mdb.operation=[0mupdate [36mdb.rows=[0m1 [36mdb.table=[0mdevices [36mduration=[0m26.977357 [36mlocation=[0m["/app/pkg/repository/device/repository.go:169","/app/pkg/graphql/resolvers/devices/mutations.go:70","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m811bcc0e [36mspan_id=[0m74a2e678634057ed [36mtrace_id=[0m9377dca014a32016b13d0df8bc2facef
bufferedLog 0 false
[90mOct  6 19:52:14.636258[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mDeviceHeartbeat [36mrequest_id=[0m811bcc0e
bufferedLog 0 false
[90mOct  6 19:52:14.636456[0m [34mTRC[0m [1mpkg/repository/message/repository.go:174[0m[36m >[0m [sql]: SELECT * FROM "messages" WHERE id IN ($1,$2,$3,$4,$5) AND "messages"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m5 [36mdb.table=[0mmessages [36mduration=[0m2.231277 [36mlocation=[0m["/app/pkg/repository/message/repository.go:174","/app/pkg/repository/message/repository.go:418","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0me95c5eac51ae6337 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.636599[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:644[0m[36m >[0m [sql]: WITH "tru_cte" AS (SELECT tra.*, subject, last_message_id, persistent_for_recipients FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads ON threads.id = thread_id WHERE user_id = $1) SELECT tr.* FROM ((SELECT $2 AS id, count(*) as count FROM "tru_cte" WHERE persistent_for_recipients IS NULL AND starred_at IS NULL AND (archived_at IS NULL AND subscription = 'inbox') AND (mailboxes IS NULL OR (mailboxes != ARRAY['ai'::thread_participants_mailbox] AND mailboxes != ARRAY['ai_session'::thread_participants_mailbox])))) AS tr [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mtr [36mduration=[0m17.329174 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:644","/app/pkg/repository/threadrecipient/repository.go:652","/app/pkg/repository/loader/loader.go:293"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m9dd9f8e661215eb1 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.637570[0m [34mTRC[0m [1mpkg/repository/app/repository.go:453[0m[36m >[0m [sql]: SELECT "workspace_apps".*, $1 AS "loader_key" FROM "workspace_apps" JOIN group_members gm ON gm.user_id = workspace_apps.app_user_id WHERE (gm.group_id = $2 AND gm.deleted_at IS NULL) AND "workspace_apps"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_apps [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/app/repository.go:453","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.637571[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct m.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN messages m ON m.thread_id = tra.thread_id AND m.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < m.id) WHERE (last_read_id IS NULL OR last_read_id < last_message_id) AND (tra.user_id = $1 AND tra.thread_id IN ($2,$3,$4)) AND m.silent = false AND (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m3.338061 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m39eb9a6cbf955df3 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.637890[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:448[0m[36m >[0m [sql]: SELECT * FROM "join_approvals" WHERE joinable_group_id = $1 AND (admin_approved_at IS NULL OR joining_approved_at IS NULL) AND "join_approvals"."deleted_at" IS NULL GROUP BY "join_approvals"."id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mjoin_approvals [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:448","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.637952[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:14Z POST /graphql - 200 (59 bytes)[0m [36mip=[0m100.103.144.21 [36mlatency=[0m53.23801 [36mmethod=[0mPOST [36mpath=[0m/graphql [36mrequest_id=[0m811bcc0e [36mstatus=[0m200 [36muser-agent=[0m"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.6 Safari/605.1.15"
bufferedLog 0 false
[90mOct  6 19:52:14.637973[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:411[0m[36m >[0m [sql]: SELECT "join_approvals".*, $1 AS "loader_key" FROM "join_approvals" WHERE joinable_group_id = $2 AND (admin_approved_at IS NULL OR joining_approved_at IS NULL) AND "join_approvals"."deleted_at" IS NULL GROUP BY "join_approvals"."id" ORDER BY "join_approvals"."id" ASC LIMIT 101 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mjoin_approvals [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:411","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.638045[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:751[0m[36m >[0m [sql]: SELECT * FROM "workspace_members" WHERE (user_id = $1 AND workspace_id IN ($2)) AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_members [36mduration=[0m0.271082 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:751","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m93eebfeb6e38bb13 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638165[0m [34mTRC[0m [1mpkg/repository/group/repository.go:172[0m[36m >[0m [sql]: SELECT * FROM "groups" WHERE id IN ($1) AND "groups"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mgroups [36mduration=[0m0.427039 [36mlocation=[0m["/app/pkg/repository/group/repository.go:172","/app/pkg/repository/group/repository.go:689","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mc5d34871b22d5616 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638198[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.638244[0m [34mTRC[0m [1mpkg/repository/group/repository.go:696[0m[36m >[0m [sql]: SELECT "group_members".*, $1 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $2 AND role = $3 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/group/repository.go:696","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.638453[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:586[0m[36m >[0m [sql]: SELECT thread_id AS id, count(id) AS count FROM "thread_recipients" WHERE thread_id IN ($1,$2,$3) AND "thread_recipients"."deleted_at" IS NULL GROUP BY "thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m3 [36mdb.table=[0mthread_recipients [36mduration=[0m0.474997 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:586","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0ma10c103387c2e806 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.637662[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct l.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN links l ON l.thread_id = tra.thread_id AND (l.linked_user_id = $1 OR l.linked_group_id IS NOT NULL OR l.linked_workspace_id IS NOT NULL) AND l.message_id IS NOT NULL AND l.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < l.message_id) WHERE (tra.user_id = $2 AND tra.thread_id IN ($3,$4,$5)) AND COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m3.757932 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m906e545a59386ef0 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.638476[0m [34mTRC[0m [1mpkg/repository/app/repository.go:453[0m[36m >[0m [sql]: SELECT wsa.* FROM ((SELECT "workspace_apps".*, $1 AS "loader_key" FROM "workspace_apps" JOIN group_members gm ON gm.user_id = workspace_apps.app_user_id WHERE (gm.group_id = $2 AND gm.deleted_at IS NULL) AND "workspace_apps"."deleted_at" IS NULL)) AS wsa WHERE "wsa"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mwsa [36mduration=[0m1.304866 [36mlocation=[0m["/app/pkg/repository/app/repository.go:453","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mccbb2f394bdd0506 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638606[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:411[0m[36m >[0m [sql]: SELECT ja.* FROM ((SELECT "join_approvals".*, $1 AS "loader_key" FROM "join_approvals" WHERE joinable_group_id = $2 AND (admin_approved_at IS NULL OR joining_approved_at IS NULL) AND "join_approvals"."deleted_at" IS NULL GROUP BY "join_approvals"."id" ORDER BY "join_approvals"."id" ASC LIMIT 101)) AS ja WHERE "ja"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mja [36mduration=[0m0.746495 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:411","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mc7eb8fcd4151d6af [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638630[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:823[0m[36m >[0m [sql]: SELECT * FROM "threads" WHERE persistent_for_recipients IN ($1) AND "threads"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mthreads [36mduration=[0m0.518122 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:823","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m97da69e200ec427c [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638204[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:153[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id IN ($1) AND "workspaces"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspaces [36mduration=[0m0.352248 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:153","/app/pkg/repository/workspace/repository.go:742","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m6ed29e17917f0767 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638762[0m [34mTRC[0m [1mpkg/repository/group/repository.go:725[0m[36m >[0m [sql]: SELECT id, members_count as count FROM "groups" WHERE id IN ($1) AND "groups"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mgroups [36mduration=[0m0.943577 [36mlocation=[0m["/app/pkg/repository/group/repository.go:725","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m4f4b148dc4235cc1 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638524[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.639079[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $3 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.639247[0m [34mTRC[0m [1mpkg/repository/joinapproval/repository.go:448[0m[36m >[0m [sql]: SELECT (CASE WHEN joinable_group_id IS NOT NULL THEN CONCAT('grp_', joinable_group_id) WHEN joinable_thread_id IS NOT NULL THEN CONCAT('thr_', joinable_thread_id) WHEN joinable_workspace_id IS NOT NULL THEN CONCAT('wks_', joinable_workspace_id) END) AS id,count(ja.id) AS count FROM ((SELECT * FROM "join_approvals" WHERE joinable_group_id = $1 AND (admin_approved_at IS NULL OR joining_approved_at IS NULL) AND "join_approvals"."deleted_at" IS NULL GROUP BY "join_approvals"."id")) AS ja GROUP BY joinable_group_id, joinable_thread_id, joinable_workspace_id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mja [36mduration=[0m1.451907 [36mlocation=[0m["/app/pkg/repository/joinapproval/repository.go:448","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060 [36mspan_id=[0maadeeb40d34c5849 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.638797[0m [34mTRC[0m [1mpkg/repository/slackgroupmetadata/repository.go:125[0m[36m >[0m [sql]: SELECT * FROM "slack_group_metadata" WHERE group_id IN ($1) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mslack_group_metadata [36mduration=[0m1.024493 [36mlocation=[0m["/app/pkg/repository/slackgroupmetadata/repository.go:125","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m61425c5736c34d55 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.639551[0m [34mTRC[0m [1mpkg/repository/group/repository.go:696[0m[36m >[0m [sql]: SELECT gm.* FROM ((SELECT "group_members".*, $1 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $2 AND role = $3 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21)) AS gm WHERE "gm"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mgm [36mduration=[0m1.397782 [36mlocation=[0m["/app/pkg/repository/group/repository.go:696","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m1ce590748092467e [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.639957[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT tr.* FROM ((SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $3 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21)) AS tr WHERE "tr"."deleted_at" IS NULL ORDER BY thread_id ASC, role DESC, id ASC [36mdb.operation=[0mselect [36mdb.rows=[0m3 [36mdb.table=[0mtr [36mduration=[0m1.897445 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m8515d23574af3ffb [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.640130[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.640171[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.642134[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:839[0m[36m >[0m [sql]: SELECT * FROM "slack_thread_metadata" WHERE thread_id IN ($1,$2,$3,$4,$5,$6,$7,$8) AND "slack_thread_metadata"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mslack_thread_metadata [36mduration=[0m1.912445 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:839","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0me429264746804f63 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.642321[0m [34mTRC[0m [1mpkg/repository/group/repository.go:172[0m[36m >[0m [sql]: SELECT * FROM "groups" WHERE id IN ($1) AND "groups"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mgroups [36mduration=[0m0.855369 [36mlocation=[0m["/app/pkg/repository/group/repository.go:172","/app/pkg/repository/group/repository.go:689","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mef07110bdf2b2d2f [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.642508[0m [34mTRC[0m [1mpkg/repository/message/repository.go:174[0m[36m >[0m [sql]: SELECT * FROM "messages" WHERE id IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) AND "messages"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m14 [36mdb.table=[0mmessages [36mduration=[0m2.387317 [36mlocation=[0m["/app/pkg/repository/message/repository.go:174","/app/pkg/repository/message/repository.go:418","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m7685c2a88551811d [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.642561[0m [34mTRC[0m [1mpkg/repository/glueai/repository.go:251[0m[36m >[0m [sql]: SELECT * FROM "glueai_sessions" WHERE (user_id = $1 AND context_thread_id IN ($2,$3,$4,$5,$6,$7,$8,$9) AND deleted_at IS NULL) AND "glueai_sessions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mglueai_sessions [36mduration=[0m1.388074 [36mlocation=[0m["/app/pkg/repository/glueai/repository.go:251","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m8d21c94367074ef8 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.643503[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:751[0m[36m >[0m [sql]: SELECT * FROM "workspace_members" WHERE (user_id = $1 AND workspace_id IN ($2)) AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_members [36mduration=[0m3.435643 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:751","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mf996914413c8d1b7 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.643977[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000209 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.644084[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.644549[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.644579[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.644620[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM kg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m63ab567917ff5ea3 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.645154[0m [34mTRC[0m [1mpkg/repository/user/repository.go:116[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id IN ($1) AND "users"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m1.151326 [36mlocation=[0m["/app/pkg/repository/user/repository.go:116","/app/pkg/repository/user/repository.go:698","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m719833c1e16364eb [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.644641[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.644516[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:804[0m[36m >[0m [sql]: SELECT "workspace_members".*, $1 AS "loader_key" FROM "workspace_members" JOIN users ON users.id = user_id AND users.deleted_at IS NULL AND users.workspace_app_id IS NULL WHERE "workspace_id" = $2 AND role = $3 AND "workspace_members"."deleted_at" IS NULL ORDER BY "workspace_members"."id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_members [36mduration=[0m0.000208 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:804","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.644733[0m [34mTRC[0m [1mpkg/repository/user/repository.go:116[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id IN ($1,$2) AND "users"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m2 [36mdb.table=[0musers [36mduration=[0m2.846564 [36mlocation=[0m["/app/pkg/repository/user/repository.go:116","/app/pkg/repository/user/repository.go:698","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m6b7e47ca55aca2d8 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.644788[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct l.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN links l ON l.thread_id = tra.thread_id AND (l.linked_user_id = $1 OR l.linked_group_id IS NOT NULL OR l.linked_workspace_id IS NOT NULL) AND l.message_id IS NOT NULL AND l.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < l.message_id) WHERE (tra.user_id = $2 AND tra.thread_id IN ($3,$4,$5,$6,$7,$8,$9,$10)) AND COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m4.67801 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/p[90mOct  6 19:52:14.649514[0m [34mTRC[0m [1mpkg/repository/user/repository.go:755[0m[36m >[0m [sql]: (SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL) UNION ALL (SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL)) ORDER BY user_id, workspace_id [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_profile_results [36mduration=[0m4.830633 [36mlocation=[0m["/app/pkg/repository/user/repository.go:755","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m4435094e2fccea79 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.649722[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT tr.* FROM ((SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21)) AS tr WHERE "tr"."deleted_at" IS NULL ORDER BY thread_id ASC, role DESC, id ASC [36mdb.operation=[0mselect [36mdb.rows=[0m2 [36mdb.table=[0mtr [36mduration=[0m6.857578 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0ma99aa34e221155cb [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.649840[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct m.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN messages m ON m.thread_id = tra.thread_id AND m.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < m.id) WHERE (last_read_id IS NULL OR last_read_id < last_message_id) AND (tra.user_id = $1 AND tra.thread_id IN ($2,$3,$4,$5,$6,$7,$8,$9)) AND m.silent = false AND (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m9.767058 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0md56942237cfcb916 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.649922[0m [34mTRC[0m [1mpkg/repository/user/repository.go:755[0m[36m >[0m [sql]: (SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL) UNION ALL (SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL)) ORDER BY user_id, workspace_id [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_profile_results [36mduration=[0m5.273756 [36mlocation=[0m["/app/pkg/repository/user/repository.go:755","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0ma26bc33504a43c61 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.650212[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:804[0m[36m >[0m [sql]: SELECT wm.* FROM ((SELECT "workspace_members".*, $1 AS "loader_key" FROM "workspace_members" JOIN users ON users.id = user_id AND users.deleted_at IS NULL AND users.workspace_app_id IS NULL WHERE "workspace_id" = $2 AND role = $3 AND "workspace_members"."deleted_at" IS NULL ORDER BY "workspace_members"."id" ASC LIMIT 21)) AS wm WHERE "wm"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mwm [36mduration=[0m6.103417 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:804","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mc975c75c074d32af [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.651343[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.651508[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:619[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:619","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.651549[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.652189[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:279[0m[36m >[0m [sql]: SELECT "user_id" FROM "workspace_members" WHERE (workspace_id = $1 AND role = $2) AND "workspace_members"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_members [36mduration=[0m1.607697 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:279","/app/pkg/graphql/objects/workspacepreview.go:34","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mda85a62683ace154 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654132[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:586[0m[36m >[0m [sql]: SELECT thread_id AS id, count(id) AS count FROM "thread_recipients" WHERE thread_id IN ($1,$2) AND "thread_recipients"."deleted_at" IS NULL GROUP BY "thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m2 [36mdb.table=[0mthread_recipients [36mduration=[0m2.153569 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:586","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m68d6d7a301d1ad90 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654206[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:839[0m[36m >[0m [sql]: SELECT * FROM "slack_thread_metadata" WHERE thread_id IN ($1,$2,$3,$4,$5) AND "slack_thread_metadata"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mslack_thread_metadata [36mduration=[0m2.414025 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:839","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m71cbc30d966105fd [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654544[0m [34mTRC[0m [1mpkg/repository/glueai/repository.go:251[0m[36m >[0m [sql]: SELECT * FROM "glueai_sessions" WHERE (user_id = $1 AND context_thread_id IN ($2,$3,$4,$5,$6) AND deleted_at IS NULL) AND "glueai_sessions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mglueai_sessions [36mduration=[0m2.629649 [36mlocation=[0m["/app/pkg/repository/glueai/repository.go:251","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m209c3084d4485696 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654510[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
d, '') GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m3.895723 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mc6d8445691b0b1c1 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.655101[0m [34mTRC[0m [1mpkg/repository/group/repository.go:696[0m[36m >[0m [sql]: SELECT "group_members".*, $4 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $5 AND role = $6 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/group/repository.go:696","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.654823[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:781[0m[36m >[0m [sql]: SELECT id AS id, members_count AS count FROM "workspaces" WHERE id IN ($1) AND "workspaces"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspaces [36mduration=[0m0.570579 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:781","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060 [36mspan_id=[0md331542d1197771b [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.654930[0m [34mTRC[0m [1mpkg/repository/group/repository.go:725[0m[36m >[0m [sql]: SELECT id, members_count as count FROM "groups" WHERE id IN ($1,$2,$3,$4) AND "groups"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m4 [36mdb.table=[0mgroups [36mduration=[0m0.733454 [36mlocation=[0m["/app/pkg/repository/group/repository.go:725","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m662fe049cbde141c [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654682[0m [34mTRC[0m [1mpkg/repository/externalobject/repository.go:128[0m[36m >[0m [sql]: SELECT distinct case when previous_ids @> ARRAY[previous_id]::text[] then previous_id else id end,
bufferedLog 0 false
 		created_at, updated_at, deleted_at, user_id, url, canonical_url, status, og_type, tw_card, site_name, title, description, image, video, audio, icon, workspace_app_id, content_available, ragie_id, layout, app_object_id, previous_ids,
bufferedLog 0 false
		preview_text, status_icon, status_color, status_text FROM "external_objects" , unnest($1::text[]) previous_id WHERE (external_objects.id IN ($2,$3) or previous_ids @> ARRAY[previous_id]::text[]) AND "external_objects"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m2 [36mdb.table=[0mexternal_objects [36mduration=[0m1.3437 [36mlocation=[0m["/app/pkg/repository/externalobject/repository.go:128","/app/pkg/repository/externalobject/repository.go:335","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m94fec032eff7a588 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654703[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct m.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN messages m ON m.thread_id = tra.thread_id AND m.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < m.id) WHERE (last_read_id IS NULL OR last_read_id < last_message_id) AND (tra.user_id = $1 AND tra.thread_id IN ($2,$3,$4,$5,$6)) AND m.silent = false AND (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m3.60935 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0md7ed1ecb3782ce54 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654975[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.654993[0m [34mTRC[0m [1mpkg/repository/user/repository.go:116[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id IN ($1) AND "users"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m0.611996 [36mlocation=[0m["/app/pkg/repository/user/repository.go:116","/app/pkg/repository/user/repository.go:698","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m4306ecbaa1963925 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.654947[0m [34mTRC[0m [1mpkg/repository/group/repository.go:737[0m[36m >[0m [sql]: SELECT "group_members".*, $1 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $2 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 101 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/group/repository.go:737","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.654825[0m [34mTRC[0m [1mpkg/repository/group/repository.go:696[0m[36m >[0m [sql]: SELECT "group_members".*, $1 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $2 AND role = $3 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0 [36mlocation=[0m["/app/pkg/repository/group/repository.go:696","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.655193[0m [34mTRC[0m [1mpkg/repository/group/repository.go:696[0m[36m >[0m [sql]: SELECT "group_members".*, $7 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $8 AND role = $9 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0 [36mlocation=[0m["/app/pkg/repository/group/repository.go:696","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.654929[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct l.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN links l ON l.thread_id = tra.thread_id AND (l.linked_user_id = $1 OR l.linked_group_id IS NOT NULL OR l.linked_workspace_id IS NOT NULL) AND l.message_id IS NOT NULL AND l.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < l.message_id) WHERE (tra.user_id = $2 AND tra.thread_id IN ($3,$4,$5,$6,$7)) AND COALESCE(last_read_id, '') < COALESCE(last_mention_message_i[90mOct  6 19:52:14.655563[0m [34mTRC[0m [1mpkg/repository/user/repository.go:755[0m[36m >[0m [sql]: (SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL) UNION ALL (SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL)) ORDER BY user_id, workspace_id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_profile_results [36mduration=[0m0.552246 [36mlocation=[0m["/app/pkg/repository/user/repository.go:755","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m72a0360bd39a0075 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.655572[0m [34mTRC[0m [1mpkg/repository/message/repository.go:174[0m[36m >[0m [sql]: SELECT * FROM "messages" WHERE id IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) AND "messages"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m11 [36mdb.table=[0mmessages [36mduration=[0m4.39797 [36mlocation=[0m["/app/pkg/repository/message/repository.go:174","/app/pkg/repository/message/repository.go:418","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m433928cd3698e7fa [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.655566[0m [34mTRC[0m [1mpkg/repository/group/repository.go:696[0m[36m >[0m [sql]: SELECT "group_members".*, $10 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $11 AND role = $12 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mgroup_members [36mduration=[0m0.000208 [36mlocation=[0m["/app/pkg/repository/group/repository.go:696","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.655970[0m [34mTRC[0m [1mpkg/repository/slackgroupmetadata/repository.go:125[0m[36m >[0m [sql]: SELECT * FROM "slack_group_metadata" WHERE group_id IN ($1,$2,$3,$4) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mslack_group_metadata [36mduration=[0m1.23745 [36mlocation=[0m["/app/pkg/repository/slackgroupmetadata/repository.go:125","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m24b44610a757d213 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.656143[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:619[0m[36m >[0m [sql]: SELECT * FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra WHERE (user_id = $1 AND thread_id IN ($2)) AND "tra"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mtra [36mduration=[0m4.806217 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:619","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m9220b9369426ac6b [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.656361[0m [34mTRC[0m [1mpkg/repository/group/repository.go:737[0m[36m >[0m [sql]: SELECT gm.* FROM ((SELECT "group_members".*, $1 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $2 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 101)) AS gm WHERE "gm"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m3 [36mdb.table=[0mgm [36mduration=[0m1.834904 [36mlocation=[0m["/app/pkg/repository/group/repository.go:737","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mae80cfe5513a64dd [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.657718[0m [34mTRC[0m [1mpkg/repository/message/repository.go:174[0m[36m >[0m [sql]: SELECT * FROM "messages" WHERE id IN ($1,$2,$3,$4,$5,$6,$7,$8) AND "messages"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m8 [36mdb.table=[0mmessages [36mduration=[0m0.655787 [36mlocation=[0m["/app/pkg/repository/message/repository.go:174","/app/pkg/repository/message/repository.go:418","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m6e4ccd9a19bbb23e [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.658299[0m [34mTRC[0m [1mpkg/repository/group/repository.go:696[0m[36m >[0m [sql]: SELECT gm.* FROM ((SELECT "group_members".*, $1 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $2 AND role = $3 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21) UNION ALL (SELECT "group_members".*, $4 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $5 AND role = $6 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21) UNION ALL (SELECT "group_members".*, $7 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $8 AND role = $9 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21) UNION ALL (SELECT "group_members".*, $10 AS "loader_key" FROM "group_members" JOIN "users" ON "user_id" = "users"."id" AND "users"."deleted_at" IS NULL WHERE group_id = $11 AND role = $12 AND "group_members"."deleted_at" IS NULL ORDER BY "group_members"."id" ASC LIMIT 21)) AS gm WHERE "gm"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m4 [36mdb.table=[0mgm [36mduration=[0m3.551226 [36mlocation=[0m["/app/pkg/repository/group/repository.go:696","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m51c810e05f743169 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.658861[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mPersistentChats [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.660290[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.660322[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.660567[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.660644[0m [34mTRC[0m [1mpkg/repository/glueai/repository.go:251[0m[36m >[0m [sql]: SELECT * FROM "glueai_sessions" WHERE (user_id = $1 AND context_thread_id IN ($2,$3) AND deleted_at IS NULL) AND "glueai_sessions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mglueai_sessions [36mduration=[0m0.481372 [36mlocation=[0m["/app/pkg/repository/glueai/repository.go:251","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m8b65bfefd1391b6f [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.660677[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.660759[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $3 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.660845[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $4 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.660848[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.660949[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $5 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.661507[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:839[0m[36m >[0m [sql]: SELECT * FROM "slack_thread_metadata" WHERE thread_id IN ($1) AND "slack_thread_metadata"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mslack_thread_metadata [36mduration=[0m0.516621 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:839","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m370e44a20cc3d000 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.661684[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $6 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.661693[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.661777[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $7 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.661812[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct l.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN links l ON l.thread_id = tra.thread_id AND (l.linked_user_id = $1 OR l.linked_group_id IS NOT NULL OR l.linked_workspace_id IS NOT NULL) AND l.message_id IS NOT NULL AND l.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < l.message_id) WHERE (tra.user_id = $2 AND tra.thread_id IN ($3,$4)) AND COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m1.618031 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0md7c4c7122355d877 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.661858[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:175[0m[36m >[0m [sql]: SELECT * FROM "threads" WHERE id IN ($1) AND "threads"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mthreads [36mduration=[0m1.438657 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:175","/app/pkg/repository/thread/repository.go:775","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mb64a4aa3ab727825 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.661865[0m [34mTRC[0m [1mpkg/repository/glueai/repository.go:251[0m[36m >[0m [sql]: SELECT * FROM "glueai_sessions" WHERE (user_id = $1 AND context_thread_id IN ($2) AND deleted_at IS NULL) AND "glueai_sessions"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mglueai_sessions [36mduration=[0m1.117617 [36mlocation=[0m["/app/pkg/repository/glueai/repository.go:251","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m3c6f0110a07ded29 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.661890[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:586[0m[36m >[0m [sql]: SELECT thread_id AS id, count(id) AS count FROM "thread_recipients" WHERE thread_id IN ($1,$2,$3,$4,$5,$6,$7) AND "thread_recipients"."deleted_at" IS NULL GROUP BY "thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m7 [36mdb.table=[0mthread_recipients [36mduration=[0m0.986118 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:586","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m00e83916af32512f [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.662067[0m [34mTRC[0m [1mpkg/repository/user/repository.go:116[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id IN ($1) AND "users"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m1.119575 [36mlocation=[0m["/app/pkg/repository/user/repository.go:116","/app/pkg/repository/user/repository.go:698","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m4756706a80b1e924 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.662306[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT tr.* FROM ((SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21)) AS tr WHERE "tr"."deleted_at" IS NULL ORDER BY thread_id ASC, role DESC, id ASC [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mtr [36mduration=[0m1.70428 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m7394dc979db88aa3 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.662408[0m [34mTRC[0m [1mpkg/repository/thread/repository.go:839[0m[36m >[0m [sql]: SELECT * FROM "slack_thread_metadata" WHERE thread_id IN ($1,$2) AND "slack_thread_metadata"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mslack_thread_metadata [36mduration=[0m0.295873 [36mlocation=[0m["/app/pkg/repository/thread/repository.go:839","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:210"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m234c1f17d39eaa50 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.662068[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:586[0m[36m >[0m [sql]: SELECT thread_id AS id, count(id) AS count FROM "thread_recipients" WHERE thread_id IN ($1) AND "thread_recipients"."deleted_at" IS NULL GROUP BY "thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mthread_recipients [36mduration=[0m1.098701 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:586","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mda0649e2d36e2bd8 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.662573[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT tr.* FROM ((SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $3 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $4 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $5 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $6 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $7 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21)) AS tr WHERE "tr"."deleted_at" IS NULL ORDER BY thread_id ASC, role DESC, id ASC [36mdb.operation=[0mselect [36mdb.rows=[0m14 [36mdb.table=[0mtr [36mduration=[0m2.111986 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m29a33d260fb800ac [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.660886[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users [90mOct  6 19:52:14.662657[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct m.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN messages m ON m.thread_id = tra.thread_id AND m.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < m.id) WHERE (last_read_id IS NULL OR last_read_id < last_message_id) AND (tra.user_id = $1 AND tra.thread_id IN ($2,$3)) AND m.silent = false AND (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m2.399317 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m9fea81251fda66fa [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.663147[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:670[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct m.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN messages m ON m.thread_id = tra.thread_id AND m.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < m.id) WHERE (last_read_id IS NULL OR last_read_id < last_message_id) AND (tra.user_id = $1 AND tra.thread_id IN ($2)) AND m.silent = false AND (unread_at IS NOT NULL OR COALESCE(last_read_id, '') < COALESCE(last_message_id, '')) GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m2.409609 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:670","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m995ad37661b21572 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.664609[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:679[0m[36m >[0m [sql]: SELECT tra.thread_id AS id, count(distinct l.id) AS count FROM (SELECT min(tr.id) AS id, min(tr.created_at) AS created_at, max(tr.updated_at) AS updated_at, NULL AS deleted_at, tr.thread_id, tr.user_id, max(tr.recipient_user_id) AS recipient_user_id, array_agg(tr.recipient_group_id) AS recipient_group_ids, array_agg(tr.recipient_workspace_id) AS recipient_workspace_ids, max(tr.role) AS role, COALESCE(tp.subscription, max(tr.thread_subscription), 'inbox') AS subscription, last_read_id, last_seen_id, archived_at, remind_at, starred_at, unread_at, stream_joined_at, last_mention_message_id, tp.mailboxes AS mailboxes FROM thread_recipients_users tr LEFT JOIN thread_participants tp ON tp.thread_id = tr.thread_id AND tp.user_id = tr.user_id AND tp.deleted_at IS NULL GROUP BY tr.thread_id, tr.user_id, tp.id) AS tra JOIN threads t ON t.id = tra.thread_id JOIN links l ON l.thread_id = tra.thread_id AND (l.linked_user_id = $1 OR l.linked_group_id IS NOT NULL OR l.linked_workspace_id IS NOT NULL) AND l.message_id IS NOT NULL AND l.deleted_at IS NULL AND (last_read_id IS NULL OR last_read_id < l.message_id) WHERE (tra.user_id = $2 AND tra.thread_id IN ($3)) AND COALESCE(last_read_id, '') < COALESCE(last_mention_message_id, '') GROUP BY "tra"."thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mtra [36mduration=[0m3.779474 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:679","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mbd4ad52f176252e5 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.665015[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000084 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.665093[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.665176[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $3 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000041 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.665373[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $4 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.00025 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.666556[0m [34mTRC[0m [1mpkg/repository/message/repository.go:174[0m[36m >[0m [sql]: SELECT * FROM "messages" WHERE id IN ($1,$2) AND "messages"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m2 [36mdb.table=[0mmessages [36mduration=[0m0.318248 [36mlocation=[0m["/app/pkg/repository/message/repository.go:174","/app/pkg/repository/message/repository.go:418","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m34027d6528ef1320 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.666587[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $5 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.666609[0m [34mTRC[0m [1mpkg/repository/user/repository.go:116[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id IN ($1) AND "users"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m0.896535 [36mlocation=[0m["/app/pkg/repository/user/repository.go:116","/app/pkg/repository/user/repository.go:698","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0mf17b132fb056bb8d [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.666743[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($3,$4) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.666361[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1,$2) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.666834[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT * FROM "thread_recipients" WHERE thread_id = $6 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mthread_recipients [36mduration=[0m0.000125 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.667356[0m [34mTRC[0m [1mpkg/repository/message/repository.go:494[0m[36m >[0m [sql]: SELECT * FROM "message_reactions" WHERE message_id = $1 AND user_id = $2 AND "message_reactions"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mmessage_reactions [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/message/repository.go:494","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.667827[0m [34mTRC[0m [1mpkg/repository/user/repository.go:755[0m[36m >[0m [sql]: (SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1,$2) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL) UNION ALL (SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($3,$4) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL)) ORDER BY user_id, workspace_id [36mdb.operation=[0mselect [36mdb.rows=[0m2 [36mdb.table=[0mworkspace_profile_results [36mduration=[0m1.046826 [36mlocation=[0m["/app/pkg/repository/user/repository.go:755","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m5f1986d6196e63d6 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.668863[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:586[0m[36m >[0m [sql]: SELECT thread_id AS id, count(id) AS count FROM "thread_recipients" WHERE thread_id IN ($1,$2,$3,$4,$5,$6) AND "thread_recipients"."deleted_at" IS NULL GROUP BY "thread_id" [36mdb.operation=[0mselect [36mdb.rows=[0m6 [36mdb.table=[0mthread_recipients [36mduration=[0m2.613857 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:586","/app/pkg/repository/loader/loader.go:293","/go/pkg/mod/github.com/graph-gophers/dataloader@v5.0.0+incompatible/dataloader.go:432"] [36mrequest_id=[0m19afee9d [36mspan_id=[0md6c7d3ca5e8d2fdc [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.669179[0m [34mTRC[0m [1mpkg/repository/message/repository.go:494[0m[36m >[0m [sql]: SELECT * FROM "message_reactions" WHERE message_id = $1 AND "message_reactions"."deleted_at" IS NULL ORDER BY "id" DESC LIMIT 21 [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mmessage_reactions [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/message/repository.go:494","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.669270[0m [34mTRC[0m [1mpkg/repository/message/repository.go:494[0m[36m >[0m [sql]: SELECT mr.* FROM ((SELECT * FROM "message_reactions" WHERE message_id = $1 AND user_id = $2 AND "message_reactions"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21)) AS mr WHERE "mr"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mmr [36mduration=[0m2.05332 [36mlocation=[0m["/app/pkg/repository/message/repository.go:494","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m33527b5cdf14deb7 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.669935[0m [34mTRC[0m [1mpkg/repository/threadrecipient/repository.go:595[0m[36m >[0m [sql]: SELECT tr.* FROM ((SELECT * FROM "thread_recipients" WHERE thread_id = $1 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $2 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $3 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $4 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $5 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21) UNION ALL (SELECT * FROM "thread_recipients" WHERE thread_id = $6 AND "thread_recipients"."deleted_at" IS NULL ORDER BY "id" ASC LIMIT 21)) AS tr WHERE "tr"."deleted_at" IS NULL ORDER BY thread_id ASC, role DESC, id ASC [36mdb.operation=[0mselect [36mdb.rows=[0m12 [36mdb.table=[0mtr [36mduration=[0m5.040507 [36mlocation=[0m["/app/pkg/repository/threadrecipient/repository.go:595","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m845aa103b318a550 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.669935[0m [34mTRC[0m [1mpkg/repository/message/repository.go:494[0m[36m >[0m [sql]: SELECT mr.* FROM ((SELECT * FROM "message_reactions" WHERE message_id = $1 AND "message_reactions"."deleted_at" IS NULL ORDER BY "id" DESC LIMIT 21)) AS mr WHERE "mr"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mmr [36mduration=[0m0.837578 [36mlocation=[0m["/app/pkg/repository/message/repository.go:494","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m89b8dbfd142053eb [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:14.671028[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000083 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.671110[0m [34mTRC[0m [1mpkg/repository/user/repository.go:753[0m[36m >[0m [sql]: SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL) [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.000042 [36mlocation=[0m["/app/pkg/repository/user/repository.go:753","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.671361[0m [34mTRC[0m [1mpkg/repository/user/repository.go:116[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id IN ($1) AND "users"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m0.155332 [36mlocation=[0m["/app/pkg/repository/user/repository.go:116","/app/pkg/repository/user/repository.go:698","/app/pkg/repository/loader/loader.go:240"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m5c65217ee207ed98 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.671742[0m [34mTRC[0m [1mpkg/repository/user/repository.go:755[0m[36m >[0m [sql]: (SELECT wm.user_id, wm.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, wm.user_id as loader_key FROM workspace_members wm JOIN workspaces w ON w.id = wm.workspace_id LEFT JOIN slack_connects sc ON sc.workspace_id = wm.workspace_id AND sc.deleted_at IS NULL LEFT JOIN slack_connect_oauth_tokens scot ON scot.user_id = wm.user_id AND scot.team_id = sc.slack_team_id WHERE wm.user_id IN ($1) AND wm.deleted_at IS NULL AND w.deleted_at IS NULL) UNION ALL (SELECT scot.user_id, sc.workspace_id, sc.slack_team_id, scot.slack_user_id as slack_user_id, sc.workspace_domain as workspace_domain, sc.id as slack_connect_guid, scot.user_id as loader_key FROM slack_connect_oauth_tokens scot JOIN slack_connects sc ON sc.slack_team_id = scot.team_id AND sc.deleted_at IS NULL JOIN workspaces w ON w.id = sc.workspace_id AND w.deleted_at IS NULL WHERE scot.user_id IN ($2) AND NOT EXISTS (SELECT 1 FROM workspace_members wm WHERE wm.user_id = scot.user_id AND wm.deleted_at IS NULL)) ORDER BY user_id, workspace_id [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspace_profile_results [36mduration=[0m0.594871 [36mlocation=[0m["/app/pkg/repository/user/repository.go:755","/app/pkg/repository/loader/loader.go:240","/app/pkg/repository/loader/loader.go:222"] [36mrequest_id=[0m760ff060 [36mspan_id=[0m864c1a87bc7f33f9 [36mtrace_id=[0m8fb133f690a3b51595c8a9b01237b55a
bufferedLog 0 false
[90mOct  6 19:52:14.672426[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mFetchGroupOrPreviewEdge [36mrequest_id=[0m760ff060
bufferedLog 0 false
[90mOct  6 19:52:14.672457[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mThreadList [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:14.673494[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:14Z POST /graphql - 200 (1641 bytes)[0m [36mip=[0m100.103.144.21 [36mlatency=[0m88.824308 [36mmethod=[0mPOST [36mpath=[0m/graphql [36mrequest_id=[0m760ff060 [36mstatus=[0m200 [36muser-agent=[0m"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.6 Safari/605.1.15"
bufferedLog 0 false
[90mOct  6 19:52:14.959675[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mNotificationCounts [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:15.007700[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:231[0m[36m >[0m [sql]: INSERT INTO "workspace_subscriptions" ("created_at","updated_at","deleted_at","workspace_id","stripe_customer","stripe_customer_id","stripe_subscription","stripe_subscription_id","stripe_subscription_status","stripe_latest_invoice","id") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) ON CONFLICT ("stripe_subscription_id")  WHERE deleted_at IS NULL DO UPDATE SET "stripe_customer"="excluded"."stripe_customer","stripe_customer_id"="excluded"."stripe_customer_id","stripe_subscription"="excluded"."stripe_subscription","stripe_subscription_id"="excluded"."stripe_subscription_id","stripe_subscription_status"="excluded"."stripe_subscription_status","stripe_latest_invoice"="excluded"."stripe_latest_invoice","updated_at"="excluded"."updated_at" RETURNING "id" [36mdb.operation=[0minsert [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m18.50729 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:231","/app/pkg/repository/repository.go:31","/app/pkg/database/database.go:35"] [36mrequest_id=[0m19afee9d [36mspan_id=[0mdc13f52ae8f95b8d [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:15.008032[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:231[0m[36m >[0m [sql]: INSERT INTO "workspace_subscriptions" ("created_at","updated_at","deleted_at","workspace_id","stripe_customer","stripe_customer_id","stripe_subscription","stripe_subscription_id","stripe_subscription_status","stripe_latest_invoice","id") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11) ON CONFLICT ("stripe_subscription_id")  WHERE deleted_at IS NULL DO UPDATE SET "stripe_customer"="excluded"."stripe_customer","stripe_customer_id"="excluded"."stripe_customer_id","stripe_subscription"="excluded"."stripe_subscription","stripe_subscription_id"="excluded"."stripe_subscription_id","stripe_subscription_status"="excluded"."stripe_subscription_status","stripe_latest_invoice"="excluded"."stripe_latest_invoice","updated_at"="excluded"."updated_at" RETURNING "id" [36mdb.operation=[0minsert [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m0.068083 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:231","/app/pkg/repository/repository.go:31","/app/pkg/database/database.go:35"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m90a53f4358fa2e85 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:15.009107[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:59[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE workspace_id = $1 AND "workspace_subscriptions"."deleted_at" IS NULL ORDER BY stripe_subscription_status desc nulls last, stripe_subscription->'current_period_end' desc,"workspace_subscriptions"."id" LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m0.969285 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:59","/app/pkg/repository/workspacesubscription/repository.go:105","/app/pkg/repository/workspacesubscription/repository.go:235"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m650f8f8a770f7d20 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:15.009660[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:924[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id IN ($1) AND "workspaces"."deleted_at" IS NULL [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspaces [36mduration=[0m0.461622 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:924","/app/pkg/repository/workspacesubscription/repository.go:113","/app/pkg/repository/workspacesubscription/repository.go:235"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m5e12aa4590f20b63 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:15.009909[0m [34mTRC[0m [1mpkg/database/database.go:35[0m[36m >[0m [sql]: SAVEPOINT sp0x105c2a0 [36mdb.operation=[0msavepoint [36mdb.rows=[0m0 [36mdb.table=[0m [36mduration=[0m0.162166 [36mlocation=[0m["/app/pkg/database/database.go:35","/app/pkg/repository/repository.go:27","/app/pkg/repository/workspacesubscription/repository.go:188"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m0df840d45b034bc2 [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:15.010762[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:910[0m[36m >[0m [sql]: UPDATE "workspaces" SET "subscription_period_end"=$1,"subscription_status"=$2,"updated_at"=$3 WHERE "workspaces"."deleted_at" IS NULL AND "id" = $4 [36mdb.operation=[0mupdate [36mdb.rows=[0m1 [36mdb.table=[0mworkspaces [36mduration=[0m0.758703 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:910","/app/pkg/repository/workspacesubscription/repository.go:189","/app/pkg/repository/repository.go:31"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m1eb4a2d7d22ae05d [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:15.026935[0m [34mTRC[0m [1mpkg/repository/workspacesubscription/repository.go:59[0m[36m >[0m [sql]: SELECT * FROM "workspace_subscriptions" WHERE workspace_id = $1 AND "workspace_subscriptions"."deleted_at" IS NULL ORDER BY stripe_subscription_status desc nulls last, stripe_subscription->'current_period_end' desc,"workspace_subscriptions"."id" LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0mworkspace_subscriptions [36mduration=[0m0.381289 [36mlocation=[0m["/app/pkg/repository/workspacesubscription/repository.go:59","/app/pkg/workspacesubscription/workspacesubscription.go:91","/app/pkg/workspacesubscription/workspacesubscription.go:161"] [36mrequest_id=[0m19afee9d [36mspan_id=[0m0214130d9b92984c [36mtrace_id=[0mddc4d162cd112cc58bbe7aa70c1ecc75
bufferedLog 0 false
[90mOct  6 19:52:15.436334[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mWorkspaceSubscriptionQuery [36mrequest_id=[0m19afee9d
bufferedLog 0 false
[90mOct  6 19:52:15.458064[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:15Z POST /graphql - 200 (8249 bytes)[0m [36mip=[0m100.103.144.21 [36mlatency=[0m880.598933 [36mmethod=[0mPOST [36mpath=[0m/graphql [36mrequest_id=[0m19afee9d [36mstatus=[0m200 [36muser-agent=[0m"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.6 Safari/605.1.15"
bufferedLog 0 false
[90mOct  6 19:52:39.682905[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0mbb0075b2fc285644beebf474e3d00f2f-2ff393e31109a04b-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
[90mOct  6 19:52:52.016958[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.deleted [36mrequest_id=[0mb1cad09f [36mstripeID=[0mevt_1SFKSlCSZYH8WWmlkNvGcUTa
bufferedLog 0 false
[90mOct  6 19:52:52.019353[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.348032 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:314"] [36mrequest_id=[0mb1cad09f [36mspan_id=[0m902f3afac5ed533d [36mtrace_id=[0m6a001e523398f280cd0a34d73d06a0e8
bufferedLog 0 false
2025/10/06 19:52:52 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[1.468ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrRe1rQKk9kXdkUrReGTCUgGx' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:52:52.020217[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:52:52Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.130.192.231 [36mlatency=[0m4.633177 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0mb1cad09f [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:52:52.157646[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3892 bytes for traces/stripe/evt_1SFKSlCSZYH8WWmlkNvGcUTa[0m [36mrequest_id=[0mb1cad09f
bufferedLog 0 false
[90mOct  6 19:53:09.750415[0m [32mINF[0m [1mpkg/tasks/worker/worker.go:154[0m[36m >[0m [1mHandling[0m [36mmessage_id=[0m [36mtask=[0mQueueThreadNotifications [36mtrace_id=[0m951d21407ec222548d11d74ab466433e-e6f2d094205a6755-1 [36mwrapped_trace_id=[0m
bufferedLog 0 false
2025-10-06 19:53:15.144 UTC [27] LOG:  checkpoint starting: time
bufferedLog 0 false
2025-10-06 19:53:15.567 UTC [27] LOG:  checkpoint complete: wrote 5 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.320 s, sync=0.022 s, total=0.424 s; sync files=4, longest=0.010 s, average=0.006 s; distance=16 kB, estimate=151 kB; lsn=0/9B0E948, redo lsn=0/9B0E8F0
bufferedLog 0 false
[90mOct  6 19:53:16.122871[0m [34mTRC[0m [1mpkg/repository/user/repository.go:108[0m[36m >[0m [sql]: SELECT * FROM "users" WHERE id = $1 AND "users"."deleted_at" IS NULL LIMIT 1 [36mdb.operation=[0mselect [36mdb.rows=[0m1 [36mdb.table=[0musers [36mduration=[0m5.766335 [36mlocation=[0m["/app/pkg/repository/user/repository.go:108","/app/pkg/operations/user/userutils/userutils.go:28","/app/pkg/operations/auth/auth.go:133"] [36mrequest_id=[0m54259867 [36mspan_id=[0mb7112f1d3dfa1a7e [36mtrace_id=[0m3c42048a526653ced7e00daebf6e4246
bufferedLog 0 false
[90mOct  6 19:53:16.123629[0m DBG [1mpkg/handlers/graphql.go:234[0m[36m >[0m Processing GraphQL [36mOperations=[0m[{"operationName":"DeviceHeartbeat","query":"mutation DeviceHeartbeat($id: ID!, $input: DeviceHeartbeatInput!) {\n  deviceHeartbeat(id: $id, input: $input)\n}","variables":{"id":"dev_33R5RI19uGaorvTdFHQQLn7SbwJ","input":{"presence":"inactive"}}}] [36mrequest_id=[0m54259867
bufferedLog 0 false
[90mOct  6 19:53:16.125556[0m DBG [1mpkg/handlers/graphql.go:258[0m[36m >[0m Processing GraphQL [36mgql.operationName=[0mDeviceHeartbeat [36mrequest_id=[0m54259867 [36mvariables=[0m{"id":"dev_33R5RI19uGaorvTdFHQQLn7SbwJ","input":{"presence":"inactive"}}
bufferedLog 0 false
[90mOct  6 19:53:16.137522[0m [34mTRC[0m [1mpkg/repository/device/repository.go:169[0m[36m >[0m [sql]: UPDATE "devices" SET "last_presence"=$1,"last_presence_at"=$2,"updated_at"=$3 WHERE user_id = $4 AND "devices"."deleted_at" IS NULL AND "id" = $5 [36mdb.operation=[0mupdate [36mdb.rows=[0m1 [36mdb.table=[0mdevices [36mduration=[0m11.335964 [36mlocation=[0m["/app/pkg/repository/device/repository.go:169","/app/pkg/graphql/resolvers/devices/mutations.go:70","/usr/local/go/src/reflect/value.go:581"] [36mrequest_id=[0m54259867 [36mspan_id=[0m5859a83c4ab8f8c6 [36mtrace_id=[0m3c42048a526653ced7e00daebf6e4246
bufferedLog 0 false
[90mOct  6 19:53:16.137768[0m DBG [1mpkg/handlers/graphql.go:264[0m[36m >[0m Finished processing GraphQL [36mgql.operationName=[0mDeviceHeartbeat [36mrequest_id=[0m54259867
bufferedLog 0 false
[90mOct  6 19:53:16.140532[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:53:16Z POST /graphql - 200 (59 bytes)[0m [36mip=[0m100.103.144.21 [36mlatency=[0m44.936901 [36mmethod=[0mPOST [36mpath=[0m/graphql [36mrequest_id=[0m54259867 [36mstatus=[0m200 [36muser-agent=[0m"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.6 Safari/605.1.15"
bufferedLog 0 false
[90mOct  6 19:53:19.203826[0m [32mINF[0m [1mpkg/handlers/stripe.go:84[0m[36m >[0m [1mreceived stripe event[0m [36meventType=[0mcustomer.subscription.deleted [36mrequest_id=[0m3c909911 [36mstripeID=[0mevt_1SFKTCCSZYH8WWmlZ8bsWjXh
bufferedLog 0 false
[90mOct  6 19:53:19.207583[0m [34mTRC[0m [1mpkg/repository/workspace/repository.go:145[0m[36m >[0m [sql]: SELECT * FROM "workspaces" WHERE id = $1 AND "workspaces"."deleted_at" IS NULL LIMIT 1 [36mdb.error=[0m"record not found" [36mdb.operation=[0mselect [36mdb.rows=[0m0 [36mdb.table=[0mworkspaces [36mduration=[0m1.270574 [36mlocation=[0m["/app/pkg/repository/workspace/repository.go:145","/app/pkg/handlers/stripe.go:144","/app/pkg/handlers/stripe.go:314"] [36mrequest_id=[0m3c909911 [36mspan_id=[0m74d3986f920bb91d [36mtrace_id=[0m6a59508ab1849e7627340b8eb73c8e56
bufferedLog 0 false
2025/10/06 19:53:19 [31;1m/app/pkg/repository/workspace/repository.go:145 [35;1mrecord not found
bufferedLog 0 false
[0m[33m[1.553ms] [34;1m[rows:0][0m SELECT * FROM "workspaces" WHERE id = '33hrDP8NK2BuB8KDaqlFpMYJxDD' AND "workspaces"."deleted_at" IS NULL LIMIT 1
bufferedLog 0 false
[90mOct  6 19:53:19.210552[0m [32mINF[0m [1mpkg/observability/logging/logging.go:110[0m[36m >[0m [1m2025-10-06T19:53:19Z POST /stripe/webhook - 200 (26 bytes)[0m [36mip=[0m3.18.12.63 [36mlatency=[0m9.803266 [36mmethod=[0mPOST [36mpath=[0m/stripe/webhook [36mrequest_id=[0m3c909911 [36mstatus=[0m200 [36muser-agent=[0m"Stripe/1.0 (+https://stripe.com/docs/webhooks)"
bufferedLog 0 false
[90mOct  6 19:53:19.360100[0m [32mINF[0m [1mpkg/traces/trace_service.go:221[0m[36m >[0m [1mSuccessfully saved 3892 bytes for traces/stripe/evt_1SFKTCCSZYH8WWmlZ8bsWjXh[0m [36mrequest_id=[0m3c909911
bufferedLog 0 false
